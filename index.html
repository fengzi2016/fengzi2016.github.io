<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="Chinese">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="frontend blog 前端技术博客">
<meta property="og:type" content="website">
<meta property="og:title" content="fengzi2016 blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="fengzi2016 blog">
<meta property="og:description" content="frontend blog 前端技术博客">
<meta property="og:locale" content="Chinese">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="fengzi2016 blog">
<meta name="twitter:description" content="frontend blog 前端技术博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>fengzi2016 blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0f2601b82368a4ed51e418d9676d3d9b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="Chinese">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">fengzi2016 blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不走别人的路，走自己的路</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/audio-thinking/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/audio-thinking/" itemprop="url">HTML5音频总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/audio-thinking/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/audio-thinking/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HTML5音频总结"><a href="#HTML5音频总结" class="headerlink" title="HTML5音频总结"></a>HTML5音频总结</h1><p>现在在网页中最常见的嵌入音频的方法莫过于 &lt; audio &gt;标签,audio标签的各种属性和方法也很容易搜索出来:<a href="http://www.w3school.com.cn/jsref/dom_obj_audio.asp" target="_blank" rel="noopener">Audio对象</a>。但是用&lt; audio &gt;标签需要注意这么多缺点：</p>
<ol>
<li><strong>兼容性</strong></li>
</ol>
<p><img src="https://wx4.sinaimg.cn/mw690/006P0MECgy1fm3r09es50j31880bw3yy.jpg" alt="兼容性"></p>
<p>很显然，Opera Mini就没有实现audio标签，而且毕竟audio是HTML5的新特性，虽然大多数浏览器的最新版本都实现了，但是无法保证所有用户都使用了浏览器最新版本。</p>
<ol start="2">
<li><strong>格式支持</strong></li>
</ol>
<p>在不同浏览器下，对各种不同格式的音频文件支持程度不一样。因此，一般的解决方法是为一个audio 添加多个 source 元素。</p>
<p>示例如下：</p>
<pre><code> &lt;audio&gt; 
    &lt;source src=&quot;music.mp3&quot;&gt;
    &lt;source src=&quot;music.ogg&quot;&gt;
    &lt;sourec src=&quot;music.wav&quot;&gt;
&lt;/audio&gt;
</code></pre><ol start="3">
<li><strong>在移动版 Safari浏览器中audio的限制更明显</strong>。</li>
</ol>
<p>比如只能实现单音频流。也就是说在这种浏览器中一次只能播放一个音乐，前面的audio会被后面覆盖，还有需要通过事件来触发音频播放。初始化音频延时等等问题。</p>
<p>详情请戳<a href="https://www.ibm.com/developerworks/cn/web/wa-ioshtml5/index.html" target="_blank" rel="noopener">《克服IOS HTML5音频的局限》</a></p>
<ol start="4">
<li><strong>无法实现比较复杂的音效</strong></li>
</ol>
<p>缺陷包括：</p>
<blockquote>
<ul>
<li>无法为声音信号使用滤波器<ul>
<li>无法访问原始的PCM数据</li>
</ul>
</li>
<li>没有来源和听众位置，方向概念</li>
<li>没有颗粒度的计时</li>
</ul>
</blockquote>
<p>详情请戳<a href="http://www.uml.org.cn/html/201206271.asp" target="_blank" rel="noopener">《用HTML5 Audio API开发游戏音乐》</a></p>
<h3 id="既然audio标签拥有这么多缺陷，总需要找出一些方法来解决。为此，必须从WEB-API角度来探索，html中音频实现的原理。"><a href="#既然audio标签拥有这么多缺陷，总需要找出一些方法来解决。为此，必须从WEB-API角度来探索，html中音频实现的原理。" class="headerlink" title="既然audio标签拥有这么多缺陷，总需要找出一些方法来解决。为此，必须从WEB API角度来探索，html中音频实现的原理。"></a>既然audio标签拥有这么多缺陷，总需要找出一些方法来解决。为此，必须从WEB API角度来探索，html中音频实现的原理。</h3><h2 id="Web-Audio"><a href="#Web-Audio" class="headerlink" title="Web Audio"></a>Web Audio</h2><blockquote>
<p>Web Audio还是一个比较新的JavaScript API，它和HTML5中的&lt; audio &gt;是不同的，简单来说，&lt; audio &gt;标签是为了能在网页中嵌入音频文件，和播放器一样，具有操作界面，而Web Audio则是给了开发者对音频数据进行处理、分析的能力，例如混音、过滤等，类似于对音频数据进行PS。</p>
</blockquote>
<p>对于web audio的应用，比较基本操作的就是:</p>
<ol>
<li>初始化audio content</li>
<li>创建audio node</li>
<li>播放声音</li>
<li>时间控制</li>
</ol>
<p>基本利用示例详情请戳<a href="http://www.cnblogs.com/ericHTML5/p/4039530.html" target="_blank" rel="noopener">《web audio 初步介绍和实践》</a></p>
<p>对web audio api的各种属性和方法的详细了解请戳<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API" target="_blank" rel="noopener">《网页音频接口的基本概念》</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/2017FinalSummary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/2017FinalSummary/" itemprop="url">2017年终总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/2017FinalSummary/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/2017FinalSummary/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="2017年终总结"><a href="#2017年终总结" class="headerlink" title="2017年终总结"></a>2017年终总结</h1><p><em>ps: 首先谢谢赵学长推荐，不然我真没想到要写总结这一茬</em></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>对于我这种记性不是很好的人来说，一年之内做了啥只能写一点东西，而且时间记不清。这个时侯github账号的推代码记录发挥了作用，自2017年4月以来，推代码上github已经从一种任务或者压力（毕竟团队学姐学长在看着呢，哈哈）变成一种习惯（都坚持这么久了，断了多可惜不是），每天不推代码上去（格子没从灰色变成绿色）脑子就会时刻提醒自己还有事情没做,所以这次总结，主要以github的推代码记录为线索。</p>
<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><p>2016年大一下学期开始学的html，css，之前没有任何计算机基础以及编程经验，到2017年4月之前都是在学一些很浅显的应用层的东西，而且很分散。当时问了赵学长的一个愚蠢的问题：“HTML和CSS差不多学完了，前端是不是就搞定了。。”。现在想起来还是‘视野太小，想得太简单！’。</p>
<p>而因为对未来的学习方向不是很确定就尝试性地学习了PHP以及其框架，从那个时候带我的老师就开始教我如何将SQL语言嵌入PHP以及用PHP写网页，但是，那时我的计算机概念太差了，每上一节课都很懵逼，看不懂代码，所以对PHP不是很喜欢。后来就放弃了PHP。</p>
<p>当时学习方法是看网上的文档或者视频，但很多知识点不能串到一起。写CSS经验不是很足，而且记得不熟，一些属性基本都要先查阅再用。现在问题依旧，总结就是 “基础不是很牢，学得浅显，拓展也不宽”。</p>
<p>当然，那个时候学C语言花的时间还算多，给我打下了一些“软实力”基础。而赵学长推荐的PAT刷题我那时就开始做了，但是发现自己做的比较慢，有错误了也不知道该如何解决，毕竟是自学，很难找到耐心的前辈请教一些小题目，所以刷题目的量与质真的比其他人落后很多。</p>
<p>这些问题，2018年寒假，我打算拼命补上。对前者打算阅读一本系统教写CSS的书籍以及实例，对后者打算制定刷题计划。</p>
<p><strong>遵循学长曾说的一句话 ： ‘学了必须要有产出’。</strong></p>
<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><h3 id="js基础"><a href="#js基础" class="headerlink" title="js基础"></a>js基础</h3><p>2017年7月暑假在特训营学的JavaScript,这个时候已经学完了C语言，理解JavaScript容易了很多。在用JS处理项目业务之前，根据组织任务安排，我刷了接近100道利用 JS高阶函数如 map,filter,reduce,foreach等以及一些方法如indexof,slice,splice等的题目来巩固JS基础，还学习了JS的特性比如多态，继承,构造函数等，以及阅读学长推荐的EloquentJavaScript书。</p>
<p>事实证明刷题很管用，JS也成为我最熟悉的语言。当然，我也发现了一些学习漏洞，比如因为我并没有系统地学习过<a href="https://www.ecma-international.org/ecma-262/6.0/" target="_blank" rel="noopener">ECMAScript 2015</a>就开始去学<a href="http://es6.ruanyifeng.com/#docs/intro" target="_blank" rel="noopener">ECMAScript 6</a>，所以当触及到 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind" target="_blank" rel="noopener">bind</a> , <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/this" target="_blank" rel="noopener">this</a> ,  <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/proto" target="_blank" rel="noopener"><em>proto</em></a> , <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener">promise</a>等高级一点知识的时候，明显感觉不知从何想起，对它们的应用场景以及应用技巧都不曾掌握，我只知道其大概的意思，却没有使用过。</p>
<p>这些问题，我打算多看技术文档和写实例来弥补。</p>
<h3 id="项目应用"><a href="#项目应用" class="headerlink" title="项目应用"></a>项目应用</h3><p>在特训营学习了JS后就开始应用前端语言写项目，在写完一个纯手写的CSS，html，JS后完成的项目后（其中数据存储只用上了浏览器缓存，并没有用数据库。当然，功能实现，但是界面很丑），我开始学习以及利用CSS框架（第一次接触框架这个概念）和各种JS封装包来写项目，这次我理解了前后台交互原理，学习了ajax，jquery等等工具，其实我觉得最重要的是：我终于知道<strong>网页的形成过程</strong>。</p>
<p>之后学习和利用了后前端node.js ，实现了用JS操作数据库,利用路由获取数据，知道了如何操作MYSQL数据库，这个时候我才理解 为什么SQL叫做 “嵌入式语言”，因为它真的可以嵌入到其它语言中。当然还学到了很多比如npm到底是什么，git的各种操作和概念，模块的概念，什么是docker和镜像，写项目的文档架构，测试的概念和做法，响应式布局等等。</p>
<p><strong>2017年暑假的特训营让我真正明白了前端要做的事情以及前端的部分生态，视野开阔了不知多少。</strong></p>
<h2 id="计算机基础"><a href="#计算机基础" class="headerlink" title="计算机基础"></a>计算机基础</h2><p>计算机基础主要靠的是专业科目的学习，大二上学期学了很多和计算机有关的课程比如，“计算机网络”，“数据结构”，“数据库系统原理”。这些课程给我补了很多之前没涉及到的基础和概念。而之后还会继续阅读《深入理解计算机系统》来巩固基础。</p>
<h2 id="又一次突破，加入团队"><a href="#又一次突破，加入团队" class="headerlink" title="又一次突破，加入团队"></a>又一次突破，加入团队</h2><p>2017年开学，我加入了木犀团队，这又是一次突破。在团队学姐的指导下，我学习了JS框架（vue.js），了解了组件化的现代前端代码趋向以及现在很火的开发项目打包工具webpack,并了解了ninja；之后利用这些工具开始写项目，而项目过程完全颠覆了我之前的写法，其中很少写原生的代码，几乎都是用一些框架方法来写，并且是拿着专门的设计图来写，而不用自己想了。</p>
<p>但是，在学习过程中还有很多漏洞：比如因为很少修改webpack的配置文件，对webpack的掌握并不是很踏实；而vue.js利用的似乎总是那么几个特性和方法，其它高级的方法都没有触及和尝试，这是得反思和改进的。</p>
<p>还学习了很多技能比如SVG,雪碧图，动画，aframe等。而如今在koa项目中我又学习到了“企业级”的node.js开发文档框架和思路（颠覆了之前的很混乱的写法），并且正在学习react.js以及之后要学的docker等等。</p>
<p>当然，其中还有一些拓展学习比如：JAVA</p>
<h2 id="思想的发展"><a href="#思想的发展" class="headerlink" title="思想的发展"></a>思想的发展</h2><p>其实，我认为和2016年相比我最大的进步是<strong>敢于自学</strong>和学会了<strong>如何自学</strong>。不管是学习任何知识，知道如何自己安排学习计划如何从0到1很重要。和之前自己想着很复杂而懒得去做最后还没开始就因为迷茫而放弃了相比，进步已经很大。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>总之，2017是很精彩的一年！虽然有苦逼和孤独的时候，但是回忆起来是一种满足和不愧。之后我会继续学习一些更高级的知识（这里又要感谢学长的之前的指导啊），不能只学会用封装包和框架，还要能写出封装包和框架。</p>
<p>最后自我勉励：<br><strong>生命不息，奋斗不止！</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/web_application_outline/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/web_application_outline/" itemprop="url">基于node和koa的小型web应用程序</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/web_application_outline/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/web_application_outline/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="基于node和koa的小型web应用程序"><a href="#基于node和koa的小型web应用程序" class="headerlink" title="基于node和koa的小型web应用程序"></a>基于node和koa的小型web应用程序</h1><h2 id="开发流程"><a href="#开发流程" class="headerlink" title="开发流程"></a>开发流程</h2><ol>
<li>需求分析，做出ER图。</li>
<li>将ER图转化为实体图（包括实体和属性）。</li>
<li>写好API文档，其中包括技术选型和数据库数据内容，前后台数据传输规范。</li>
<li>数据库创建模式和基本表，当然数据应该保证完整性和保密性。</li>
<li>写后台API，可以通过postman测试。</li>
<li>写前台界面，这个时候我们已经保证前后台数据流通了，页面代码写好后修改一下前台API取得的DOM元素就可以。</li>
<li>最后综合，测试，完善，拓展，结束。</li>
</ol>
<h2 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h2><p><strong>后台开发环境：</strong> Node.js</p>
<p><strong>后台开发框架：</strong> koa</p>
<p><strong>数据库：</strong> Mysql</p>
<p><strong>应用测试，打包，发布以及服务器部署调整数据库工具：</strong> docker</p>
<p><strong>前端框架：</strong> react</p>
<p><strong>前台API：</strong></p>
<h2 id="涉及的技术"><a href="#涉及的技术" class="headerlink" title="涉及的技术"></a>涉及的技术</h2><ul>
<li><strong>Node.js</strong></li>
</ul>
<p>它是由C++语言编写的后端的Javascript运行环境。支持的编程语言是Javascript，在项目中用于编写后端服务器代码，接受前台js发送给后台的数据以及进行处理。</p>
<pre><code>Node.js® is a JavaScript runtime built on Chrome&apos;s V8 JavaScript engine. Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient. Node.js&apos; package ecosystem, npm, is the largest ecosystem of open source libraries in the world. 
                                                --Node.js官网
</code></pre><p>特点：</p>
<ol>
<li>采用Google Chrome浏览器的V8引擎</li>
<li>采用事件驱动，异步编程</li>
<li>有npm作为其资源库</li>
</ol>
<ul>
<li><p><strong>koa</strong></p>
<p>koa是基于Node.js平台的下一代web开发框架。</p>
<p><em>为什么我们要用开发框架？</em></p>
<p>虽然我们可以利用Node.js封装的方法和原生的javascript来写后台的API,但是如果我们使用像express,koa这种框架，代码量和逻辑会变得更简单。</p>
</li>
</ul>
<p><em>为什么要用koa？</em></p>
<p>koa是express框架的发展，相对与express，koa更轻便和健壮。不同于express基于ES5语法，我们只能使用回调来解决异步问题;而koa是基于ES6的generator，用generator实现了异步,使得代码变得更简洁。尤其是koa2基于ES7,使用Promise并配合async来实现异步。</p>
<p>  我的理解是Node.js是让javasript可以作为后端编程语言的运行环境，或者说将javascript解析成可以控制电脑进程或者http传输的语言。而koa则是开发的“语法糖”，它封装的很多方法（函数）使得程序员在编写后台API时更简单。</p>
<ul>
<li><p><strong>docker</strong></p>
</li>
<li><p><strong>Mysql</strong></p>
</li>
<li><strong>react</strong></li>
<li></li>
</ul>
<ol>
<li><p>需求分析<br>用户系统：</p>
<pre><code>游客：阅读
用户：阅读，发表，评论
管理员：审批用户，控制热点
超级管理员：管理管理员
</code></pre><p>种类：</p>
<pre><code>前端
后端
安卓
产品
设计
</code></pre></li>
</ol>
<ol start="2">
<li><p>实体</p>
<p>用户<br>文章<br>评论<br>种类</p>
<!-- 视频
图片 -->
</li>
</ol>
<ol start="3">
<li><p>数据库内容<br>种类表：</p>
<pre><code>content
</code></pre><p>用户表：</p>
<pre><code>user_id  [key]
user_name
user_email [key]
user_pwd
user_avatar_url
user_role
user_activation_code
user_status
</code></pre></li>
</ol>
<p>文章表:<br>        article_id<br>        article_title<br>        article_content<br>        <!-- article_time --><br>        article_author_id<br>        article_ category</p>
<p>评论表:<br>        comment_id<br>        comment_content<br>        comment_time<br>        comment_author_id</p>
<p>用户-文章关系表:<br>      id<br>      user_id<br>      article_id<br>      time</p>
<p>用户-评论关系表：<br>     id<br>     user_id<br>     article_id<br>     comment_id<br>     time<br>文章-评论关系表：<br>    id<br>    article_id<br>    comment_id<br>    time</p>
<ol start="4">
<li><p>API</p>
</li>
<li><p>注册||激活码，登录</p>
</li>
<li>获取主页</li>
<li>获取各类别页面</li>
<li>获取个人中心</li>
<li>获取某篇文章的详情包括评论</li>
<li>删除某篇文章</li>
<li>删除某篇评论</li>
<li><p>修改个人中心</p>
<pre><code>修改资料

修改邮箱

修改密码
</code></pre></li>
<li>发表评论</li>
<li>发表文章</li>
<li>修改文章</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/vue-music-learn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/vue-music-learn/" itemprop="url">学习vue-music的总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/vue-music-learn/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/vue-music-learn/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="学习vue-music的总结"><a href="#学习vue-music的总结" class="headerlink" title="学习vue-music的总结"></a>学习vue-music的总结</h1><h2 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h2><p>文件夹: stylus</p>
<ul>
<li>index.styl</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"./rest.styl"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./base.styl"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./icon.styl"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>base.styl //基本样式</li>
<li>icon.styl //按钮样式</li>
<li>mixin.styl //函数样式</li>
<li>reset.styl //重置浏览器默认样式</li>
<li>variable.styl //变量样式</li>
</ul>
<p>文件夹api </p>
<p>config.js //放置公共路由参数<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> commonParams&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="封装jsonp"><a href="#封装jsonp" class="headerlink" title="封装jsonp"></a>封装jsonp</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> originJSONP <span class="keyword">from</span> <span class="string">'jsonp'</span></span><br><span class="line"> <span class="keyword">export</span> <span class="keyword">default</span> </span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">url,data,option</span>)</span>&#123;</span><br><span class="line">     url += (url.indexOf(<span class="string">'?'</span>)&lt;<span class="number">0</span>?<span class="string">"?"</span>:<span class="string">"&amp;"</span>)+param(data)</span><br><span class="line"></span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>[</span><br><span class="line">         originJSONP(url,option,(err,data)=&gt;&#123;</span><br><span class="line">             <span class="keyword">if</span>(!err) &#123;</span><br><span class="line">                 resolve(data)</span><br><span class="line">             &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                 reject(err)</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;)</span><br><span class="line">     ])</span><br><span class="line"> &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">param</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> url =<span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> data)&#123;</span><br><span class="line">        <span class="keyword">let</span> value = data[k]!==<span class="literal">undefined</span>?data[k]:<span class="string">''</span></span><br><span class="line">        url += <span class="string">`&amp;<span class="subst">$&#123;k&#125;</span>=<span class="subst">$&#123;encodeURLComponent(value)&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//encodeURLComponent 对URL中的标点符号进行编码</span></span><br><span class="line">    <span class="keyword">return</span> url?url.substring(<span class="number">1</span>):<span class="string">''</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="某些移动端有用的库"><a href="#某些移动端有用的库" class="headerlink" title="某些移动端有用的库"></a>某些移动端有用的库</h2><ul>
<li>babel-runtime es6转译es5 //不需要import</li>
<li>fastclick 移动端300ms延迟</li>
<li>babel-ployfill babel补丁，es6API转译 <h2 id="封装dom-js-添加class"><a href="#封装dom-js-添加class" class="headerlink" title="封装dom.js 添加class"></a>封装dom.js 添加class</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//处理DOM的class添加</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">el,className</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(hasClass(el,className)) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">let</span> newClass = el.className.split(<span class="string">" "</span>)</span><br><span class="line">     newClass.push(className);</span><br><span class="line">    el.className = newClass.join(<span class="string">" "</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">hasClass</span>(<span class="params">el,className</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(^|\\s)'</span>+className+<span class="string">'(\\s|$)'</span>)</span><br><span class="line">    <span class="keyword">return</span> reg.test(el.className)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//处理DOM的data- 各种属性</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params">el,name,val</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> prefix = <span class="string">'data-'</span>;</span><br><span class="line">    name = prefix + name;</span><br><span class="line">    <span class="keyword">if</span> (val) &#123;</span><br><span class="line">        <span class="keyword">return</span> el.setAttribute(name,val);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> el.getAttribute(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="构造出类封装代码。"><a href="#构造出类封装代码。" class="headerlink" title="构造出类封装代码。"></a>构造出类封装代码。</h2><h3 id="作用：直接处理从服务器返回的数据，使得这个类里的数据可以直接应用到Dom对象渲染，减少代码量"><a href="#作用：直接处理从服务器返回的数据，使得这个类里的数据可以直接应用到Dom对象渲染，减少代码量" class="headerlink" title="作用：直接处理从服务器返回的数据，使得这个类里的数据可以直接应用到Dom对象渲染，减少代码量"></a>作用：直接处理从服务器返回的数据，使得这个类里的数据可以直接应用到Dom对象渲染，减少代码量</h3><p>例子：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//common文件夹里</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Singer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(&#123;id,name&#125;)&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//使用地方</span></span><br><span class="line"><span class="keyword">import</span> Singer <span class="keyword">from</span> <span class="string">'./common/singer.js'</span></span><br><span class="line"><span class="keyword">let</span> singer = <span class="keyword">new</span> Singer(&#123;id,name&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="bind-css"><a href="#bind-css" class="headerlink" title="bind css"></a>bind css</h2><h3 id="作用：绑定动态背景图片等css样式"><a href="#作用：绑定动态背景图片等css样式" class="headerlink" title="作用：绑定动态背景图片等css样式"></a>作用：绑定动态背景图片等css样式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>  <span class="attr">:style</span> = <span class="string">"bgStyle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//this.baImage()返回了一个图片地址</span></span><br><span class="line"><span class="comment">//1.</span></span><br><span class="line">computed:&#123;</span><br><span class="line">    bgStyle()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`background-image:url(<span class="subst">$&#123;<span class="keyword">this</span>.bgImage()&#125;</span>)`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//给layer DOM动态添加一个滑动效果、</span></span><br><span class="line"><span class="keyword">this</span>.$refs.layer.style[<span class="string">'transform'</span>]=<span class="string">`translated3d(0,<span class="subst">$&#123;translateY&#125;</span>px,0)`</span>;</span><br></pre></td></tr></table></figure>
<h2 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h2><ul>
<li>一般不在created等生命周期内写大量函数内容，而是把函数放在methods，再在生命周期函数内 调用this._xxx()</li>
<li>语义化代码：把返回的状态放在api/config中，比如如果正确的话是 ERR_OK，再import 进vue中，判断code是否为ERR_OK</li>
<li>slot 标签放在 base 中的基本组件，slot的内容为其被引进的.vue的标签内部dom</li>
<li>监听窗口resize()事件可以保持slider随着窗口大小变化</li>
<li>语义化代码：一些不变的字符串要给它们赋给变量名，比如:const HOT_NAME = “热门”</li>
<li>vue-lazy-load 懒加载插件</li>
<li><p>当然数据只是为了在多个方法中共享而不需要被vue监听时，应该放在created(){}中<br>  比如:</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">created()&#123;</span><br><span class="line">    <span class="keyword">this</span>.touch=&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>method等中公有方法放上面，私有方法放下面</p>
</li>
<li><p>vue滑动进入和退出动画</p>
<p>  <code>`</code>css</p>
<pre><code>.slide-enter-active,.slide-leave-active{
    transition:all 0.3s            
}
.slide-enter,.slide-leave-to {
    transform:translate3d(100%,0,0)
}
</code></pre><p><code></code></p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/vue-introduce/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/vue-introduce/" itemprop="url">Vue introduce</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/vue-introduce/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/vue-introduce/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Vue-introduce"><a href="#Vue-introduce" class="headerlink" title="Vue introduce"></a>Vue introduce</h1><p>今天我来介绍一个用vue框架写的项目的形成与使用。</p>
<h2 id="Vue是什么"><a href="#Vue是什么" class="headerlink" title="Vue是什么?"></a>Vue是什么?</h2><p>我对它的初步理解是：一个以数据为驱动的，构造组件为核心思想的JS框架。</p>
<p>官方文档的介绍是这样说的：</p>
<blockquote>
<p>Vue (读音 /vjuː/，类似于 view) 是一套用于构建用户界面的渐进式框架。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与现代化的工具链以及各种支持类库结合使用时，Vue 也完全能够为复杂的单页应用提供驱动。</p>
</blockquote>
<p>看了这一段话，很多名词我们可能都没见过，这里我们对一些生涩的词进行探索。</p>
<h3 id="什么叫做渐进式框架？"><a href="#什么叫做渐进式框架？" class="headerlink" title="什么叫做渐进式框架？"></a>什么叫做渐进式框架？</h3><p>意思就是 这个框架本身对开发者要求的规则比较少。<br>引用一个反例子：</p>
<blockquote>
<p>每个框架都不可避免会有自己的一些特点，从而会对使用者有一定的要求，这些要求就是主张，主张有强有弱，它的强势程度会影响在业务开发中的使用方式。比如说，Angular，它两个版本都是强主张的，如果你用它，必须接受以下东西：- 必须使用它的模块机制- 必须使用它的依赖注入- 必须使用它的特殊形式定义组件（这一点每个视图框架都有，难以避免）所以Angular是带有比较强的排它性的，如果你的应用不是从头开始，而是要不断考虑是否跟其他东西集成，这些主张会带来一些困扰。  作者：徐飞<br>链接：<a href="https://www.zhihu.com/question/51907207/answer/136559185" target="_blank" rel="noopener">https://www.zhihu.com/question/51907207/answer/136559185</a><br>来源：知乎 著作权归作者所有处</p>
</blockquote>
<p>其实就是 它会给你很多选择，当你有更多需要的第三方库的时候再自己加。再来一个生动的例子就是：好比给你一个空屋，通了煤水电网，有床够睡，需要什么自己添；亦或给你拎包入住，但住了一阵子这不满意那不满意。vue就是前者。</p>
<h3 id="什么是视图层？"><a href="#什么是视图层？" class="headerlink" title="什么是视图层？"></a>什么是视图层？</h3><p>说到视图层，这里就要先了解一下目前的前端开发的构架模式：MVVM 。</p>
<blockquote>
<p>MVVM是 Model-View-ViewModel的缩写。在MVVM架构下，View 和 Model 之间并没有直接的联系，而是通过ViewModel进行交互，Model 和 ViewModel 之间的交互是双向的， 因此View 数据的变化会同步到Model中，而Model 数据的变化也会立即反应到View 上。</p>
</blockquote>
<p>其中View层就是视图层。在HTML5还没有风靡的时候，Web端的构架模式一般都是用JAVA的Model-View-Controller 即 模型-视图-控制器。其中</p>
<ul>
<li>View UI布局展示数据</li>
<li>Model 管理数据</li>
<li>Controller 响应用户操作，并将Model更新到View上</li>
</ul>
<p>而这个框架慢慢被前端抛弃是因为有以下痛点：</p>
<ul>
<li>大量相同DOM API被重复调用，操作冗余，降低渲染性能，加载速度</li>
<li>Model 和 View层频繁发生变化都需要开发者用原生代码进行两层同步</li>
</ul>
<p>而利用MVVM则可以通过ViewModel 进行双向数据绑定，开发者主要关心业务逻辑就行。</p>
<h3 id="什么是单页应用？"><a href="#什么是单页应用？" class="headerlink" title="什么是单页应用？"></a>什么是单页应用？</h3><blockquote>
<p>单页Web应用（single page web application，SPA），就是只有一张Web页面的应用，是加载单个HTML 页面并在用户与应用程序交互时动态更新该页面的Web应用程序。 —-百度百科</p>
</blockquote>
<p>这样说可能还不是很清楚，我们拿传统页面和单页面做个对比：</p>
<p>传统页面:</p>
<p><img src="https://wx3.sinaimg.cn/large/006P0MECly1fply93z3e6j30il0a074m.jpg" alt="多页"></p>
<p>单页应用：</p>
<p> <img src="https://wx2.sinaimg.cn/large/006P0MECly1fply93hicqj30jh05x74f.jpg" alt="单页">   </p>
<blockquote>
<p>单页应用的特点: </p>
<ul>
<li><strong>控制器前置</strong>，单页应用将路由处理放在浏览器端，即在浏 览器端直接响应浏览器地址的变化，分发到对应的路由，向用户呈现对应的界面。</li>
<li><strong>以小块组件为功能元件</strong>，类似于传统网页中的 Ajax 组件，单页应用以小的组件为功能元件，在路由变化时，不再刷新整个页面，而是组合这些小的组件，替换变化的部分。</li>
<li><strong>数据层前置</strong>，与 Ajax 组件一个明显的区别是，单页应用在浏览器端通常有一层实实在在的数据层，而服务端则退化成了完全的数据 API。浏览器端的数据层会封装服务端 API，供上层的视图层调用。</li>
</ul>
</blockquote>
<p>现在我们组的很多项目就是单页应用，单页应用有这几个好处:</p>
<ul>
<li>无刷新体验</li>
<li>完全的前端组件化</li>
<li>API共享</li>
<li><p>组件共享</p>
<p>如果想了解更多单页的，可以戳<a href="http://tinyambition.com/Single-Page-App-Break/%E7%AC%AC01%E7%AB%A0%20%E4%BD%95%E4%B8%BA%E5%8D%95%E9%A1%B5%E5%BA%94%E7%94%A8.html" target="_blank" rel="noopener">这里</a></p>
</li>
</ul>
<p>现在我们大概理解了Vue.js是什么以及它介绍中的一些扩展和特点，那么开始来了解它怎么使用。</p>
<p>在官方文档里面对它的各种方法有详尽的解释和例子，这里因为只是引入我解释一些常用的方法和API。</p>
<h3 id="如何开始？"><a href="#如何开始？" class="headerlink" title="如何开始？"></a>如何开始？</h3><ul>
<li>如果你想使用Vue.js ，最简单的就是用js内联引入一个在线包<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>但是我们一般是工程化的项目，所以正常情况下是用 npm 下载它的库:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install vue</span><br></pre></td></tr></table></figure>
<p>然后再用vue-cli脚手架，来创建你的vue项目。vue-cli可用于快速搭建大型单页应用，该工具为现代化的前端开发工作流提供了开箱即用的构建配置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 全局安装 vue-cli</span><br><span class="line">$ npm install --global vue-cli</span><br><span class="line"># 创建一个基于 webpack 模板的新项目</span><br><span class="line">$ vue init webpack my-project</span><br><span class="line"># 安装依赖，走你</span><br><span class="line">$ cd my-project</span><br><span class="line">$ npm run dev</span><br></pre></td></tr></table></figure></p>
<h3 id="vue这个库提供了什么给我们？"><a href="#vue这个库提供了什么给我们？" class="headerlink" title="vue这个库提供了什么给我们？"></a>vue这个库提供了什么给我们？</h3><p>我之前也没有详细分析到底Vue提供了什么，写这个教程进行分析后发现，其实还是很好理解的。</p>
<p>对于开发者来说，vue提供了一个Vue类，我们都知道，使用类之前都要进行实例化，Vue也不例外,而要当我们要利用vue开发时，需要给Vue传入一个参数，这个参数的数据类型是对象。下面创建了一个没有任何赋值的Vue实例，但是它本身应该有一些初始化属性和方法，这些可能要去看源码了解。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;&#125;)</span><br></pre></td></tr></table></figure></p>
<p>那么一个Vue实例需要传入的参数需要什么属性呢？</p>
<p>比较常用的以下几个：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#example'</span>,<span class="comment">//绑定的DOM元素</span></span><br><span class="line">    data:&#123;&#125; <span class="comment">//数据对象。数据改变时视图被重新渲染</span></span><br><span class="line">    <span class="comment">//生命周期：</span></span><br><span class="line">    created: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 表现：key: function</span></span><br><span class="line">        <span class="comment">// 表示一个实例被创建之后执行代码</span></span><br><span class="line">        <span class="comment">// `this` 指向 vm 实例</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//还有mounted、updated 和 destroyed等等</span></span><br><span class="line">    computed: &#123;</span><br><span class="line">         <span class="comment">//表现： key:&#123;...function&#125;</span></span><br><span class="line">        <span class="comment">// 内部函数放在HTML标签上，每次初始或者更新时渲染到这个函数绑定到的DOM元素就会触发对应方法</span></span><br><span class="line">       </span><br><span class="line">        reversedMessage: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">     &#125;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="comment">//表现：key:&#123;...function&#125;</span></span><br><span class="line">        <span class="comment">//内部函数放在HTML标签上,每次触发到某个被绑定的DOM元素的某些事件就会触发对应方法</span></span><br><span class="line">        reversedMessage: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    watch: &#123;</span><br><span class="line">         <span class="comment">//表现:key:&#123;...function&#125;</span></span><br><span class="line">         <span class="comment">//当某些数据随着其它数据变化时需要用到watch</span></span><br><span class="line">         <span class="comment">//想监听哪个数据，则函数名词与data对象中的属性名相同</span></span><br><span class="line">            keyName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这是一个vue实例最基本的几个使用方法和API，下面我们学习一下HTML的模板语法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Message: &#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--msg是data中设置的数据，这里就将数据直接和HTML相结合--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 也可以用 JavaScript 表达式 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; number + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在vue.js的模板语法中，最常见的还是v- 指令，比如<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">"dynamicId"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>指令的职责是，当表达式的值改变时，将其产生的连带影响，响应式地作用于 DOM。也就是说页面上凡是需要动态响应的数据和事件都需要用v- 指令将其与vue实例绑定。</p>
<p>所以上面这个例子的意思是说： div的id属性值是 vue实例中 data中 dynamicId属性的值，而如果你想改变ID，只需要在vue实例中做一些修改就能同步改变这个DOM 的id。</p>
<p>比较常用的指令有：</p>
<ul>
<li>v-bind: ，缩写”:” ,它的值一般是data数据和computed里的函数，或者当有父子组件中的数据传递时的props；:后面接的可以是dom的原有属性，也可以是自定义名称</li>
<li>v-on:，缩写”@”,它的值一般是methods里的方法；@后面接的一般是dom的监听事件比如click，当有父子组件中的事件传递时则是自定义事件名</li>
<li>v-html ,将数据直接转化为DOM的html，这个时候数据一般是 字符串类型的标签值</li>
<li>v-for,当数据是数组时，会对数据进行遍历</li>
<li>v-if ,决定DOM元素是否存在</li>
<li>v-show,决定DOM元素会展现，即使不展现会占位</li>
<li>v-model,经常在input表单出现，v-model的值就是表单的值</li>
</ul>
<p>现在我们知道了HTML和JS是如何联系的，但是Vue如何控制CSS呢？</p>
<p>在处理CSS的时候，如果一个DOM的样式在某段时间或者会因为某个事件发生变化，则应该先在CSS文件中定义多个样式和对应选择器，再通过以下方式进行样式切换</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"static"</span></span></span><br><span class="line"><span class="tag"> <span class="attr">v-bind:class</span>=<span class="string">"&#123; active: isActive, 'text-danger': hasError &#125;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其中 active和text-danger是class，isActive和hasError是data中的属性值，一般情况下是布尔值。</p>
<p>以上介绍了vue的基本用法，比较高级和详细的用法在官方文档里更详细，我就不再说了。</p>
<h3 id="一个用webpack打包，用ninja做脚手架的vue-js项目目录"><a href="#一个用webpack打包，用ninja做脚手架的vue-js项目目录" class="headerlink" title="一个用webpack打包，用ninja做脚手架的vue.js项目目录"></a>一个用webpack打包，用ninja做脚手架的vue.js项目目录</h3><p><img src="https://wx2.sinaimg.cn/large/006P0MECly1fpm1j0mv7wj308g0g7jrj.jpg" alt="vue"></p>
<p>下面对各个文件夹进行解释：</p>
<ul>
<li>build和config ：webpack配置文件</li>
<li>mock:虚拟数据和路由定义</li>
<li>server:部署到服务器上后的服务器代码</li>
<li>src:vue业务逻辑代码，静态文件，图片等</li>
<li>template:放置渲染结果的ejs和html容器，最后所有的js都被引入里面对应的html</li>
</ul>
<p>实际在开发时因为业务逻辑比较多，我们经常把每个组件分开来写，再用export default暴露出来，再通过import进行组件的组合，也就是组件化与模块化一起使用。<br>所以 真正在写项目的时候，一个.vue文件应该是这样的：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 只允许有一个根容器，这里是第一个div --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">he</span>&gt;</span><span class="tag">&lt;/<span class="name">he</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> &gt;</span>xxx<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> header <span class="keyword">from</span> <span class="string">"./header.vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> footer <span class="keyword">from</span> <span class="string">"./footer.vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> show <span class="keyword">from</span> <span class="string">"./show.vue"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Cookie <span class="keyword">from</span> <span class="string">"cookie"</span>;</span></span><br><span class="line"><span class="javascript"><span class="comment">// 几个公共处理文件或者库</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> marked <span class="keyword">from</span> <span class="string">"mark"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> API <span class="keyword">from</span> <span class="string">"api"</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> pattern <span class="keyword">from</span> <span class="string">"dateFormatter"</span>;</span></span><br><span class="line"><span class="javascript"><span class="comment">//export default暴露这个组件</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">      id: 0,</span></span><br><span class="line"><span class="undefined">      share: &#123;</span></span><br><span class="line"><span class="javascript">        type: <span class="built_in">Object</span></span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      items: [],</span></span><br><span class="line"><span class="javascript">      isAuthor: <span class="literal">false</span></span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="javascript"><span class="comment">// 引入其它组件 ，其它组件内部和这个例子一样</span></span></span><br><span class="line"><span class="undefined">  components: &#123;</span></span><br><span class="line"><span class="undefined">    he: header,</span></span><br><span class="line"><span class="undefined">    foot: footer,</span></span><br><span class="line"><span class="undefined">    show: show</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  computed: &#123;</span></span><br><span class="line"><span class="javascript">    compiledMarkdown: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> marked(<span class="keyword">this</span>.share.share || <span class="string">""</span>, &#123; <span class="attr">sanitize</span>: <span class="literal">false</span> &#125;);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  mounted() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> api = <span class="built_in">window</span>.location.pathname;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.id = api.split(<span class="string">"/"</span>)[<span class="number">2</span>]; <span class="comment">//把 id props 给子组件</span></span></span><br><span class="line"><span class="javascript">    API.getView(<span class="keyword">this</span>.id).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.share = value.shares;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.items = value.comments;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (<span class="keyword">this</span>.share.username === Cookie.getCookie(<span class="string">"username"</span>)) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.isAuthor = <span class="literal">true</span>;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    fetchComments() &#123;</span></span><br><span class="line"><span class="javascript">      API.getView(<span class="keyword">this</span>.id).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.items = res.comments;</span></span><br><span class="line"><span class="undefined">      &#125;);</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">  </span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- css --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"scss"</span> <span class="attr">module</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">html &#123;</span></span><br><span class="line"><span class="undefined">  position: absolute;</span></span><br><span class="line"><span class="undefined">  right: 10vw;</span></span><br><span class="line"><span class="undefined">  top: 7vh;</span></span><br><span class="line"><span class="undefined">  width: fit-content;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>其中像 &lt; he &gt;这个标签就是我们自己定义的组件，之后被import进来，组合使用，是不是觉得很自由？之后我们也可以命名标签了噢！</p>
<p>要使得vue项目能用webpack打包，有一个loader（处理器）不得不提，即 vue-loader。</p>
<p>我们可以看出，.vue文件内部是html,css,javascript的组合，为什么浏览器可以运行.vue文件呢？vue-loader起了很大作用。</p>
<p>vue-loader 是一个 webpack 的 loader，可以将上面那个例子的 Vue 组件转换为 JavaScript 模块，即:</p>
<blockquote>
<p>Vue组件默认分成三部分，&lt; template &gt;、&lt; script &gt; 和 &lt; style &gt;，我们可以把一个组件要有的html，js，css写在一个组件文件中，而vue-loader，会帮助我们去处理这个vue组件，把其中的html，js，css分别编译处理，最终打包成一个模块。</p>
</blockquote>
<p>比如在上面那个例子中，vue-loader会告诉webpack要用scss-loader来处理style，用html-loader来处理template。</p>
<p><strong>而vue-loader是怎么实现的呢？</strong></p>
<blockquote>
<p>loader本质就是接收字符串(或者buffer)，再返回处理完的字符串(或者buffer)的过程。webpack会将加载的资源作为参数传入loader方法，交于loader处理，再返回。</p>
</blockquote>
<p>如果想自己实现一个loader,相关教程可以看官方文档<a href="https://doc.webpack-china.org/contribute/writing-a-loader" target="_blank" rel="noopener">“编写一个loader”</a></p>
<p>在真实的项目中，我们经常会遇到各种数据或者说状态在不同组件中传递，这个时候我们就需要了解一些数据传递的方法和API。</p>
<p>先理解什么是父子组件，举个栗子：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在app.vue里 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">father</span>&gt;</span><span class="tag">&lt;/<span class="name">father</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在father.vue里 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">son</span>&gt;</span><span class="tag">&lt;/<span class="name">son</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在son.vue里 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">grandson</span>&gt;</span><span class="tag">&lt;/<span class="name">grandson</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在这个例子中有father,son,grandson三种关系。</p>
<p><strong>父传子：</strong></p>
<p>如果father组件想传递数据给son，则在son的vue实例中添加一个<strong>props</strong>属性，承接father的属性值。举个例子：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在father.vue中 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- data是在father组件中设置的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">son</span> <span class="attr">data</span> = <span class="string">"x"</span>&gt;</span><span class="tag">&lt;/<span class="name">son</span>&gt;</span></span><br><span class="line">   </span><br><span class="line"><span class="comment">&lt;!-- 在son.vue中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">       </span></span><br><span class="line"><span class="javascript">        props:[<span class="string">"data"</span>] <span class="comment">//如果是my-message ，则应该改成myMessage</span></span></span><br><span class="line"><span class="javascript">         data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">         <span class="keyword">return</span> &#123; <span class="attr">counter</span>: <span class="keyword">this</span>.data &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//将父组件传过来的属性值 赋给子组件的局部属性count</span></span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 如果你觉得data会动态变化则需要动态绑定 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">son</span> <span class="attr">v-bind:data</span> = <span class="string">"parentMsg"</span>&gt;</span><span class="tag">&lt;/<span class="name">son</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>子传父</strong>：</p>
<p>利用Vue 的自定义事件系统，每个 Vue 实例都实现了事件接口，即：</p>
<ul>
<li><p>使用 $on(eventName) 监听事件</p>
</li>
<li><p>使用 $emit(eventName, optionalPayload) 触发事件</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- father.vue里面 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"counter-event-example"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">son</span> <span class="attr">v-on:increment</span>=<span class="string">"incrementTotal"</span>&gt;</span><span class="tag">&lt;/<span class="name">son</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!-- son.vue里面 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"incrementCounter"</span>&gt;</span>&#123;&#123; counter &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//son.vue里面</span></span><br><span class="line">   <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"> </span><br><span class="line">    data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        counter: <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    incrementCounter: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.counter += <span class="number">1</span></span><br><span class="line">      <span class="keyword">this</span>.$emit(<span class="string">'increment'</span>) <span class="comment">//emit（冒泡）触发父组件监听的increment方法</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//father.vue里面</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    total: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    incrementTotal: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.total += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>非父子间数据或事件传输</strong>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//new 一个新的vue实例</span></span><br><span class="line"><span class="keyword">var</span> bus = <span class="keyword">new</span> Vue()</span><br><span class="line"><span class="comment">//grandson.vue里面</span></span><br><span class="line"><span class="comment">// 触发组件father 中的事件，第二个参数为触发的事件需要的参数，1就是id</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  data:&#123;&#125;</span><br><span class="line">  mouted()&#123;</span><br><span class="line">    <span class="comment">//渲染后</span></span><br><span class="line">    bus.$emit(<span class="string">'id-selected'</span>, <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//father.vue里面</span></span><br><span class="line"><span class="comment">//监听事件</span></span><br><span class="line">bus.$on(<span class="string">'id-selected'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>现在大多数基础会用到的基本介绍完毕，官方文档对高级一点的使用有非常详尽的教程和例子。</p>
<h2 id="最后总结一个原则-凡是会动态变化的，都应该v-on-或者v-bind；除了特殊情况不允许在vue里面用JS直接操作HTML-DOM，一定是数据驱动视图的。"><a href="#最后总结一个原则-凡是会动态变化的，都应该v-on-或者v-bind；除了特殊情况不允许在vue里面用JS直接操作HTML-DOM，一定是数据驱动视图的。" class="headerlink" title="最后总结一个原则: 凡是会动态变化的，都应该v-on,或者v-bind；除了特殊情况不允许在vue里面用JS直接操作HTML DOM，一定是数据驱动视图的。"></a>最后总结一个原则: 凡是会动态变化的，都应该v-on,或者v-bind；除了特殊情况不允许在vue里面用JS直接操作HTML DOM，一定是数据驱动视图的。</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/vue-deep-learning-note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/vue-deep-learning-note/" itemprop="url">VUE.JS深度学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/vue-deep-learning-note/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/vue-deep-learning-note/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="VUE-JS深度学习笔记"><a href="#VUE-JS深度学习笔记" class="headerlink" title="VUE.JS深度学习笔记"></a>VUE.JS深度学习笔记</h1><h2 id="进入-离开-amp-列表过渡"><a href="#进入-离开-amp-列表过渡" class="headerlink" title="进入/离开&amp;列表过渡"></a>进入/离开&amp;列表过渡</h2><h3 id="实质"><a href="#实质" class="headerlink" title="实质"></a>实质</h3><p> 实质就是动画不同阶段给DOM元素添加或删除不同的class</p>
<h3 id="可用的情况"><a href="#可用的情况" class="headerlink" title="可用的情况"></a>可用的情况</h3><ol>
<li>v-if</li>
<li>v-show</li>
<li>动态组件</li>
<li>组件根节点</li>
</ol>
<p>总结：有普通渲染外的动态生成这个过程才可用</p>
<h3 id="类名分类"><a href="#类名分类" class="headerlink" title="类名分类"></a>类名分类</h3><p> v-enter<br> v-enter-active<br> v-enter-to</p>
<p> 将enter改成leave就是另外3个</p>
<h3 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h3><pre><code>&lt;div id=&quot;example-1&quot;&gt;
&lt;button @click=&quot;show = !show&quot;&gt;
    Toggle render
&lt;/button&gt;
&lt;transition name=&quot;slide-fade&quot;&gt;
    &lt;p v-if=&quot;show&quot;&gt;hello&lt;/p&gt;
&lt;/transition&gt;
&lt;/div&gt;

new Vue({
    el: &apos;#example-1&apos;,
    data: {
        show: true
    }
})
 .slide-fade-enter-active {
        transition: all .3s ease;
  }
 .slide-fade-leave-active {
        transition: all .8s cubic-bezier(1.0, 0.5, 0.8, 1.0);
   }
 .slide-fade-enter, .slide-fade-leave-to
 transform: translateX(10px);
        opacity: 0;
}
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/thinking17-11-29/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/thinking17-11-29/" itemprop="url">2017.11.29反思</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/thinking17-11-29/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/thinking17-11-29/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="2017-11-29反思"><a href="#2017-11-29反思" class="headerlink" title="2017.11.29反思"></a>2017.11.29反思</h2><p><strong>今天，我终于严重得认识到自己的问题：心态散了，没有当初那么努力。</strong></p>
<p><strong>为什么？我总结了以下原因：</strong></p>
<ol>
<li>最近玩了手游。原因：松懈。</li>
<li>竞争感和紧迫感更少。原因：因为某些小成就自满</li>
<li>对前端的探索欲更少。原因：自以为已经学会了很多</li>
<li>活动参加多了就有点不专心。原因：对学习关注度降低</li>
<li>自卑感变少，满足感变多。原因：自大，满足于过去的产出，止步不前</li>
<li>某些情绪干扰。原因：欲望太多。</li>
</ol>
<p><strong>为此我深感自责，不过现在我已经摆正心态，并有所行动和打算：</strong></p>
<ol>
<li>卸载游戏</li>
<li>内心树立竞争对手</li>
<li>巩固已学领域并开阔视野，探索更多领域</li>
<li>对各种学习和活动做好权重分配</li>
<li>贬低自己，让自卑成为动力</li>
<li>以学习为主，对其他事情不想太多</li>
<li>像之前一样刻苦</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/search/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/search/" itemprop="url">查询功能总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/search/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/search/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="查询功能总结"><a href="#查询功能总结" class="headerlink" title="查询功能总结"></a>查询功能总结</h1><h2 id="本次项目查询功能我们小组实现了“分类查询”，“模糊查询”，“分类后模糊查询”，其中有一些需要学习的地方，以后可能会常用"><a href="#本次项目查询功能我们小组实现了“分类查询”，“模糊查询”，“分类后模糊查询”，其中有一些需要学习的地方，以后可能会常用" class="headerlink" title="本次项目查询功能我们小组实现了“分类查询”，“模糊查询”，“分类后模糊查询”，其中有一些需要学习的地方，以后可能会常用"></a>本次项目查询功能我们小组实现了“分类查询”，“模糊查询”，“分类后模糊查询”，其中有一些需要学习的地方，以后可能会常用</h2><hr>
<h2 id="源码如下："><a href="#源码如下：" class="headerlink" title="源码如下："></a>源码如下：</h2><p><strong>前端JS部分</strong><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'.cr-mysubmit'</span>).on(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       <span class="keyword">let</span> myselect = $(<span class="string">'.cr-search-select'</span>).find(<span class="string">"option:selected"</span>).html();</span><br><span class="line">       <span class="keyword">let</span> myinput  = $(<span class="string">'.cr-myinput'</span>).val();</span><br><span class="line">       <span class="keyword">if</span>(myinput)&#123;</span><br><span class="line">           <span class="keyword">if</span>(myselect === <span class="string">'全部电影'</span>)&#123;</span><br><span class="line">               $.post(<span class="string">'/oneSearchResult'</span>,&#123;<span class="attr">moviename</span>:myinput&#125;,<span class="function"><span class="keyword">function</span> (<span class="params">ans</span>) </span>&#123;</span><br><span class="line">                   <span class="keyword">if</span>(ans)&#123;</span><br><span class="line">                       <span class="keyword">let</span> str = <span class="string">''</span>;</span><br><span class="line">                       <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; ans.length; i++) &#123;</span><br><span class="line">                           str += <span class="string">'&lt;div class="col-lg-3 col-md-4 col-sm-6 col-xs-12 ttx-movie"&gt;'</span>;</span><br><span class="line">                           str += <span class="string">`&lt;a onclick="myonclickhrf(<span class="subst">$&#123;ans[i].id&#125;</span>)"&gt;&lt;img class="center-block ttx-movie-photo" src="<span class="subst">$&#123;ans[i].movieimg&#125;</span>" width="65%" height="100%" alt=""&gt;&lt;/a&gt;`</span>;</span><br><span class="line">                           str += <span class="string">`&lt;p class="ttx-movie-text"&gt;&lt;a onclick="myonclickhrf(<span class="subst">$&#123;ans[i].id&#125;</span>)" &gt;<span class="subst">$&#123;ans[i].name&#125;</span>&lt;/a&gt;&lt;strong&gt;<span class="subst">$&#123;ans[i].score&#125;</span>&lt;/strong&gt;&lt;/p&gt;`</span>;</span><br><span class="line">                           str += <span class="string">`&lt;/div&gt;`</span>;</span><br><span class="line">                       &#125;</span><br><span class="line">                       $(<span class="string">".ttx-movie-container"</span>).empty().append(str);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;);</span><br><span class="line">           &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">               $.post(<span class="string">'/searchResult'</span>,&#123;<span class="attr">comment</span>:myselect,<span class="attr">moviename</span>:myinput&#125;,<span class="function"><span class="keyword">function</span> (<span class="params">ans</span>) </span>&#123;</span><br><span class="line">                   <span class="keyword">if</span>(ans)&#123;</span><br><span class="line">                       <span class="keyword">let</span> str = <span class="string">''</span>;</span><br><span class="line">                      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; ans.length; i++) &#123;</span><br><span class="line">                           str += <span class="string">'&lt;div class="col-lg-3 col-md-4 col-sm-6 col-xs-12 ttx-movie"&gt;'</span>;</span><br><span class="line">                           str += <span class="string">`&lt;a onclick="myonclickhrf(<span class="subst">$&#123;ans[i].id&#125;</span>)"&gt;&lt;img class="center-block ttx-movie-photo" src="<span class="subst">$&#123;ans[i].movieimg&#125;</span>" width="65%" height="100%" alt=""&gt;&lt;/a&gt;`</span>;</span><br><span class="line">                           str += <span class="string">`&lt;p class="ttx-movie-text"&gt;&lt;a onclick="myonclickhrf(<span class="subst">$&#123;ans[i].id&#125;</span>)" &gt;<span class="subst">$&#123;ans[i].name&#125;</span>&lt;/a&gt;&lt;strong&gt;<span class="subst">$&#123;ans[i].score&#125;</span>&lt;/strong&gt;&lt;/p&gt;`</span>;</span><br><span class="line">                           str += <span class="string">`&lt;/div&gt;`</span>;</span><br><span class="line">                       &#125;</span><br><span class="line">                       $(<span class="string">".ttx-movie-container"</span>).empty().append(str);</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">return</span> bootbox.alert(<span class="string">"请填写电影名称!"</span>);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p>
<p><strong>后端服务器部分</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获得一个电影的搜索结果</span></span><br><span class="line">app.post(<span class="string">"/oneSearchResult"</span>,urlencodedParser, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> moviename=req.body.moviename;</span><br><span class="line">    req.models.T_movie.find(&#123;<span class="attr">name</span>:orm.like(<span class="string">"%"</span>+moviename+<span class="string">"%"</span>)&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, movies</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">        res.send(movies);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">/*得到这个电影名称的搜索结果 OK*/</span></span><br><span class="line">app.post(<span class="string">"/searchResult"</span>,urlencodedParser, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> moviename=req.body.moviename;</span><br><span class="line">    <span class="keyword">let</span> comment=req.body.comment;</span><br><span class="line">    req.models.T_movie.find(&#123;<span class="attr">name</span>:orm.like(<span class="string">"%"</span>+moviename+<span class="string">"%"</span>),<span class="attr">comment</span>:orm.like(<span class="string">"%"</span>+comment+<span class="string">"%"</span>)&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, movies</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">        res.send(movies);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>html部分</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"navbar-form navbar-right"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">"form-control cr-search-select "</span> <span class="attr">id</span>=<span class="string">"comment"</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">option</span> <span class="attr">role</span>=<span class="string">"presentation"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>全部电影<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control cr-myinput"</span> <span class="attr">placeholder</span>=<span class="string">"搜索电影"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">button</span>  <span class="attr">class</span>=<span class="string">"btn btn-default cr-mysubmit"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"glyphicon glyphicon-search"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<hr>
<ol>
<li><p><strong>获取下拉列表已经选中的值</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myselect = $(<span class="string">'.cr-search-select'</span>).fin(<span class="string">"option:selected"</span>).html();</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>获取输入框值</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myinput  = $(<span class="string">'.cr-myinput'</span>).val();</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>清空原有元素，加载动态创建元素</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">".ttx-movie-container"</span>).empty().append(str);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>搜索一条数据，模糊搜索</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">req.models.T_movie.find(&#123;<span class="attr">name</span>:orm.like(<span class="string">"%"</span>+moviename+<span class="string">"%"</span>)&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, movies</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    res.send(movies);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>种类加模糊搜索</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> &#123;<span class="attr">comment</span>:myselect,<span class="attr">moviename</span>:myinput&#125;<span class="comment">//数据发送</span></span><br><span class="line"></span><br><span class="line"> req.models.T_movie.find(&#123;<span class="attr">name</span>:orm.like(<span class="string">"%"</span>+moviename+<span class="string">"%"</span>),<span class="attr">comment</span>:orm.like(<span class="string">"%"</span>+comment+<span class="string">"%"</span>)&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err, movies</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">        res.send(movies);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//后台接收</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/React/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/React/" itemprop="url">React 相关资源</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/React/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/React/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="React-相关资源"><a href="#React-相关资源" class="headerlink" title="React 相关资源"></a>React 相关资源</h1><h2 id="Single-Page-Application-单页面应用SPA"><a href="#Single-Page-Application-单页面应用SPA" class="headerlink" title="Single Page Application 单页面应用SPA"></a>Single Page Application 单页面应用SPA</h2><h3 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h3><p>存在于一个页面的Web应用或网站(url不会刷新)</p>
<h3 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h3><p>浏览器端第一次get请求，服务器发送html页面</p>
<p>之后的请求，服务器只发送数据，前端html页面自动渲染</p>
<h3 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h3><ol>
<li>页面无刷新</li>
<li>实时性</li>
<li>显示逻辑存储在客户端</li>
<li>服务器端只负责数据</li>
<li>架构非常类似原生APP</li>
<li>更好的用户体验</li>
</ol>
<h2 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h2><p><strong><a href="http://todomvc.com/" target="_blank" rel="noopener">TodoMVC</a>各种框架组合效果</strong></p>
<ol>
<li><a href="https://angular.cn/" target="_blank" rel="noopener">angular</a></li>
<li><a href="https://www.emberjs.com/" target="_blank" rel="noopener">ember</a></li>
<li><a href="https://cn.vuejs.org/index.html" target="_blank" rel="noopener">vuejs</a></li>
<li><a href="https://facebook.github.io/react/" target="_blank" rel="noopener">react</a></li>
<li><p><a href="https://www.meteor.com/" target="_blank" rel="noopener">meteor</a></p>
<h2 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h2><p>最优秀者：</p>
</li>
</ol>
<p><strong><a href="https://material.io/guidelines/material-design/introduction.html" target="_blank" rel="noopener">Material Design</a></strong> </p>
<p> <strong><a href="http://www.material-ui.com/#/" target="_blank" rel="noopener">Material UI</a></strong></p>
<p> <strong><a href="https://www.materialpalette.com/" target="_blank" rel="noopener">Metarial palette</a></strong></p>
<p>(<em>materialup</em> ，<em>dribble</em>)可以在这两个网页找到它的实例</p>
<p>思想： Material Design 是一种视觉语言，表达设计思想，也是一个设计学校。</p>
<p>其它：</p>
<ol>
<li><a href="http://www.bootcss.com/" target="_blank" rel="noopener">bootstrap</a></li>
<li><a href="http://www.semantic-ui.cn/" target="_blank" rel="noopener">Semantic UI</a></li>
<li><p><a href="https://ant.design/" target="_blank" rel="noopener">ant design</a> <em>组件化</em></p>
<h2 id="网络资源"><a href="#网络资源" class="headerlink" title="网络资源"></a>网络资源</h2></li>
<li><p>youtube</p>
</li>
<li>好多视频网</li>
<li><p>learncodeacademy</p>
<p>React Native 构建原生移动 App</p>
<p>依赖管理：仅考虑 NPM 和 ES6 模块</p>
<p>格式和风格：ESlint 配合 Airbnb 指南</p>
<p>构建工具：Webpack</p>
<p>工具库：Lodash 是绝对王者</p>
<p>Http 请求：就只用 fetch</p>
<p>样式：只用 inline-style</p>
<p>Postcss/Sass </p>
<p>CSS module </p>
<h2 id="组件化设计"><a href="#组件化设计" class="headerlink" title="组件化设计"></a>组件化设计</h2><ol>
<li>第一步，先选色盘(奠定网站的个性基调)</li>
<li>第二步，设计基础组件(先设计出这些最小可复用的 UI 单元)</li>
<li>第三步，设计复杂组件(一个复杂组件内部会包含一个或者多个基础组件)</li>
<li>设计综合体组件(多个复杂组件，可以组成一个综合体)</li>
<li>第五步，设计布局</li>
<li>第六步，填入页面内容</li>
</ol>
<p>设计工具 Sketch</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/Private_variables/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/Private_variables/" itemprop="url">JS中的私有变量</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/Private_variables/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/Private_variables/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JS中的私有变量"><a href="#JS中的私有变量" class="headerlink" title="JS中的私有变量"></a>JS中的私有变量</h1><p>当项目需要保护一些在运行时不应该被改变的数据(包括变量，函数，参数等等)时，我们就应该创建私有变量。但是JavaScript并不像C语言一样有修饰符来控制访问，并且所有属性都要在函数中定义。下面有几种在JavaScript中创建私有变量的方法。</p>
<h2 id="一-无法真正阻止变量被访问或修改"><a href="#一-无法真正阻止变量被访问或修改" class="headerlink" title="一. 无法真正阻止变量被访问或修改"></a>一. 无法真正阻止变量被访问或修改</h2><h3 id="1-命名约定"><a href="#1-命名约定" class="headerlink" title="1. 命名约定"></a>1. 命名约定</h3><p>使用特定的命名约定表示属性应该视为私有。通常以下划线作为属性名称的前缀（例如 _count ）。这并没有真正阻止变量被访问或修改，而是依赖于开发者之间的相互理解，认为这个变量应该被视为限制访问。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原文示例</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">            <span class="keyword">this</span>._width = width;<span class="comment">//私有变量</span></span><br><span class="line">            <span class="keyword">this</span>._height = height;<span class="comment">//私有变量</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-WeakMap"><a href="#2-WeakMap" class="headerlink" title="2. WeakMap"></a>2. WeakMap</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/WeakMap" target="_blank" rel="noopener">WeakMap 对象</a>是一组键/值对的集合，其中的键是弱引用的。其键必须是对象，而值可以是任意的。<br>使用 WeakMap 来存储所有私有值，将私有值与用户可操作的对象分开。这种技术的好处是在遍历属性时或者在执行 JSON.stringify 时不会展示出实例的私有属性，但它依赖于一个放在类外面的可以访问和操作的 WeakMap 变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原文示例</span></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="comment">// 创建一个在每个实例中存储私有变量的对象</span></span><br><span class="line"><span class="keyword">const</span> internal = <span class="function"><span class="params">obj</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!map.has(obj)) &#123;</span><br><span class="line">    map.set(obj, &#123;&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> map.get(obj);</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">    internal(<span class="keyword">this</span>).width = width;</span><br><span class="line">    internal(<span class="keyword">this</span>).height = height;</span><br><span class="line">  &#125;</span><br><span class="line">  get area() &#123;</span><br><span class="line">    <span class="keyword">return</span> internal(<span class="keyword">this</span>).width * internal(<span class="keyword">this</span>).height;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(square.area); <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(map.get(square));<span class="comment">// &#123; height: 100, width: 100 &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-Symbol"><a href="#3-Symbol" class="headerlink" title="3.Symbol"></a>3.Symbol</h3><p>Symbol()函数会返回symbol类型的值，<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" target="_blank" rel="noopener">symbol</a> 是一种基本数据类型 （primitive data type）。</p>
<p>用Symbol创建私有变量的方法和作用和weakMap很相似，但写法有差异，需要为每个私有属性创建一个 Symbol。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原文示例</span></span><br><span class="line">    <span class="keyword">var</span> SymbolWidth =  <span class="built_in">Symbol</span>(<span class="string">'width'</span>);</span><br><span class="line">    <span class="keyword">var</span> SymbolHeight = <span class="built_in">Symbol</span>(<span class="string">'height'</span>);</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>(width,height)&#123;</span><br><span class="line">            <span class="keyword">this</span>[SymbolWidth] = width;</span><br><span class="line">            <span class="keyword">this</span>[SymbolHeight] = height;</span><br><span class="line">        &#125;</span><br><span class="line">    get area() &#123;</span><br><span class="line">    returnthis[widthSymbol] * <span class="keyword">this</span>[heightSymbol];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(square.area); <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(square.widthSymbol);<span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(square[widthSymbol]); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure></p>
<h2 id="二-阻止变量被访问或修改"><a href="#二-阻止变量被访问或修改" class="headerlink" title="二.阻止变量被访问或修改"></a>二.阻止变量被访问或修改</h2><h3 id="4-闭包"><a href="#4-闭包" class="headerlink" title="4. 闭包"></a>4. 闭包</h3><p>闭包是将数据封装在调用时创建的函数作用域内，但是只从内部返回函数的结果，从而使这一作用域无法从外部访问。可以将闭包与 WeakMap 或 Symbol 一起使用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//理解用：</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">bibao</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="keyword">const</span> <span class="keyword">this</span>$ = &#123;&#125;;<span class="comment">//所有私有变量组成的对象</span></span><br><span class="line">       <span class="class"><span class="keyword">class</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">        <span class="keyword">constructor</span>(width,height)&#123;</span><br><span class="line">           <span class="keyword">this</span>$.width = width;</span><br><span class="line">           <span class="keyword">this</span>$.height = height;</span><br><span class="line">       &#125;</span><br><span class="line">       get area()&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">this</span>$.width*<span class="keyword">this</span>$.height;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;   </span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//原文示例</span></span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">Shape</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 私有变量集</span></span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">this</span>$ = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">      <span class="keyword">this</span>$.width = width;</span><br><span class="line">      <span class="keyword">this</span>$.height = height;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>, <span class="string">'area'</span>, &#123;</span><br><span class="line">        get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">this</span>$.width * <span class="keyword">this</span>$.height;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.setPrototypeOf(<span class="keyword">new</span> Shape(...arguments), <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(square.area);         <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(square.width);            <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(square <span class="keyword">instanceof</span> Shape); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="5-Proxy"><a href="#5-Proxy" class="headerlink" title="5. Proxy"></a>5. Proxy</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener">Proxy</a> 对象用于定义基本操作的自定义行为（如属性查找，赋值，枚举，函数调用等）。它将允许你有效地将对象包装在名为 Proxy 的对象中，并拦截与该对象的所有交互。创建 Proxy 时，你将提供两个参数，第一个是您打算包裹的实例，第二个是您定义的希望拦截不同方法的 “处理器” 对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原文示例:</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(width, height) &#123;</span><br><span class="line">    <span class="keyword">this</span>._width = width;</span><br><span class="line">    <span class="keyword">this</span>._height = height;</span><br><span class="line">  &#125;</span><br><span class="line">  get area() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._width * <span class="keyword">this</span>._height;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> handler = &#123;</span><br><span class="line">  get: <span class="function"><span class="keyword">function</span>(<span class="params">target, key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">'_'</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> newError(<span class="string">'Attempt to access private property'</span>);</span><br><span class="line">    &#125; elseif (key === <span class="string">'toJSON'</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> target) &#123;</span><br><span class="line">        <span class="keyword">if</span> (key[<span class="number">0</span>] !== <span class="string">'_'</span>) &#123;</span><br><span class="line">          obj[key] = target[key];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span><span class="function"><span class="params">()</span> =&gt;</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target[key];</span><br><span class="line">  &#125;,</span><br><span class="line">  set: <span class="function"><span class="keyword">function</span>(<span class="params">target, key, value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">'_'</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> newError(<span class="string">'Attempt to access private property'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    target[key] = value;</span><br><span class="line">  &#125;,</span><br><span class="line">  getOwnPropertyDescriptor(target, key) &#123;</span><br><span class="line">    <span class="keyword">const</span> desc = <span class="built_in">Object</span>.getOwnPropertyDescriptor(target, key);</span><br><span class="line">    <span class="keyword">if</span> (key[<span class="number">0</span>] === <span class="string">'_'</span>) &#123;</span><br><span class="line">      desc.enumerable = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> desc;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> <span class="built_in">Proxy</span>(<span class="keyword">new</span> Shape(<span class="number">10</span>, <span class="number">10</span>), handler);</span><br><span class="line"><span class="built_in">console</span>.log(square.area);<span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(square <span class="keyword">instanceof</span> Shape); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(square));  <span class="comment">// "&#123;&#125;"</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> square) &#123;           <span class="comment">// No output</span></span><br><span class="line"><span class="built_in">console</span>.log(key);</span><br><span class="line">&#125;</span><br><span class="line">square._width = <span class="number">200</span>; <span class="comment">// 错误：试图访问私有属性</span></span><br></pre></td></tr></table></figure>
<p>详情请戳<a href="http://mp.weixin.qq.com/s/8yyI1bB8eYu3-fCoDJM4Og" target="_blank" rel="noopener">JavaScript 中的私有变量</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460"
                alt="gyf" />
            
              <p class="site-author-name" itemprop="name">gyf</p>
              <p class="site-description motion-element" itemprop="description">frontend blog 前端技术博客</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/fengzi2016" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://user.qzone.qq.com/1820166258/infocenter" target="_blank" title="QQ">
                    
                      <i class="fa fa-fw fa-qq"></i>QQ</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/fengzi2016China" target="_blank" title="Twitter">
                    
                      <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                </span>
              
            
          </div>

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                团队分享
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://share.muxixyz.com/" title="MuXi" target="_blank">MuXi</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">gyf</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  









  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/three/three.min.js"></script>

  
  <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  

    
      <script id="dsq-count-scr" src="https://.disqus.com/count.js" async></script>
    

    

  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
