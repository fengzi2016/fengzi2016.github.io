<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="Chinese">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="frontend blog 前端技术博客">
<meta property="og:type" content="website">
<meta property="og:title" content="fengzi2016 blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="fengzi2016 blog">
<meta property="og:description" content="frontend blog 前端技术博客">
<meta property="og:locale" content="Chinese">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="fengzi2016 blog">
<meta name="twitter:description" content="frontend blog 前端技术博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>fengzi2016 blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0f2601b82368a4ed51e418d9676d3d9b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="Chinese">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">fengzi2016 blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不走别人的路，走自己的路</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/pagination/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/pagination/" itemprop="url">学习如何分页</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/pagination/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/pagination/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="学习如何分页"><a href="#学习如何分页" class="headerlink" title="学习如何分页"></a>学习如何分页</h1><p><em>在此次项目中我们的童‘总监’做成了分页的功能，在此我想总结一下。</em></p>
<h2 id="‘无组’分页"><a href="#‘无组’分页" class="headerlink" title="‘无组’分页"></a>‘无组’分页</h2><h3 id="采用了jqPaginator插件，源码如下："><a href="#采用了jqPaginator插件，源码如下：" class="headerlink" title="采用了jqPaginator插件，源码如下："></a>采用了jqPaginator插件，源码如下：</h3><p><strong>js部分</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">axios.post(<span class="string">'/allMovies'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">ans</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> mynum = <span class="built_in">parseInt</span>((ans.data.length/<span class="number">16</span>))+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">''</span>;</span><br><span class="line">    $(<span class="string">'.ttx-my-number'</span>).jqPaginator(&#123;</span><br><span class="line">        totalPages: mynum,</span><br><span class="line">        visiblePages: <span class="number">20</span>,</span><br><span class="line">        currentPage: <span class="number">1</span>,</span><br><span class="line">        onPageChange: <span class="function"><span class="keyword">function</span> (<span class="params">num, type</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> str = <span class="string">''</span>;</span><br><span class="line">            <span class="keyword">let</span> mycurrentnum = (num<span class="number">-1</span>)*<span class="number">16</span>;</span><br><span class="line">            <span class="keyword">let</span> myendnum = num*<span class="number">16</span> - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(myendnum &gt; ans.data.length - <span class="number">1</span>)&#123;</span><br><span class="line">                myendnum = ans.data.length - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = mycurrentnum; i &lt;=myendnum; i++) &#123;</span><br><span class="line">                str += <span class="string">'&lt;div class="col-lg-3 col-md-4 col-sm-6 col-xs-12 ttx-movie"&gt;'</span>;</span><br><span class="line">                str += <span class="string">`&lt;a onclick="myonclickhrf(<span class="subst">$&#123;ans.data[i].id&#125;</span>)"&gt;&lt;img class="center-block ttx-movie-photo" src="<span class="subst">$&#123;ans.data[i].movieimg&#125;</span>" width="65%" height="100%" alt=""&gt;&lt;/a&gt;`</span>;</span><br><span class="line">                str += <span class="string">`&lt;p class="ttx-movie-text"&gt;&lt;a onclick="myonclickhrf(<span class="subst">$&#123;ans.data[i].id&#125;</span>)" &gt;<span class="subst">$&#123;ans.data[i].name&#125;</span>&lt;/a&gt;&lt;strong&gt;<span class="subst">$&#123;ans.data[i].score&#125;</span>&lt;/strong&gt;&lt;/p&gt;`</span>;</span><br><span class="line">                str += <span class="string">`&lt;/div&gt;`</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            $(<span class="string">".ttx-movie-container"</span>).empty().append(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p> <strong>html部分</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-lg-9 col-md-9 col-sm-9 col-xs-9 ttx-right"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">"breadcrumb ttx-bread"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span>全部影片<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row ttx-movie-container"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span> <span class="attr">aria-label</span>=<span class="string">"..."</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"pagination ttx-my-number"</span>&gt;</span></span><br><span class="line">                          </span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<p><strong>解析</strong></p>
<p>此次样式上利用了<a href="http://v3.bootcss.com/" title="boostrap" target="_blank" rel="noopener">boostrap框架</a>，js上利用的是<a href="http://jqpaginator.keenwon.com/" title="jqPaginator" target="_blank" rel="noopener">jqPaginator插件</a>。</p>
<pre><code>axios.post(&apos;/allMovies&apos;).then(function (ans) {}
</code></pre><p>axios前端向后端(‘/allMovies’)路由post数据，then()里的函数是数据接收后的回调函数，ans是接受的数据，类型是对象，ans的data属性的值是数组</p>
<pre><code>let mynum = parseInt((ans.data.length/16))+1;
</code></pre><p>求出ans的data属性值的长度</p>
<pre><code>$(&apos;.ttx-my-number&apos;).jqPaginator({}）
</code></pre><p>利用jquery方法，此为给<strong>class</strong>为<em>ttx-my-number</em>调用一个js函数</p>
<pre><code>totalPages: mynum,
visiblePages: 20,
currentPage: 1,
</code></pre><p>总页数为后台传来的数据mynum，分页的总页数为20,当前页码为1</p>
<pre><code>onPageChange: function (num, type) {}
</code></pre><p>回调函数，当换页时触发（包括初始化第一页的时候），会传入两个参数：</p>
<p>1、“目标页”的页码，Number类型</p>
<p>2、触发类型，可能的值：“init”（初始化），“change”（点击分页）</p>
<pre><code>let mycurrentnum = (num-1)*16;
</code></pre><p>*16代表每页有16个电影，<strong>mycurrentnum</strong>表示点击后目标页后所需要加载的第一个数据</p>
<pre><code>myendnum = num*16 - 1;
</code></pre><p><strong>myendnum</strong>代表点击目标页数所需要加载的最后一个数据（电影）</p>
<pre><code>if(myendnum &gt; ans.data.length - 1){
            myendnum = ans.data.length - 1;
        }
</code></pre><p>如果目标页所需要加载的最后一个数据大于后台提供的数据，则最后一个数据就是后台提供的最后一个数据。</p>
<pre><code>for (let i = mycurrentnum; i &lt;=myendnum; i++) {}
</code></pre><p>表示加载点击目标页第一个数据到最后一个数据</p>
<pre><code>str += &apos;&lt;div class=&quot;col-lg-3 col-md-4 col-sm-6 col-xs-12 ttx-movie&quot;&gt;&apos;;
</code></pre><p>第一层div：加样式</p>
<pre><code>&lt;a onclick=&quot;myonclickhrf(${ans.data[i].id})&quot;&gt;
     &lt;img class=&quot;center-block ttx-movie-photo&quot; src=&quot;$  {ans.data[i].movieimg}&quot; width=&quot;65%&quot; height=&quot;100%&quot; alt=&quot;&quot;&gt;
&lt;/a&gt;
</code></pre><p>第二层div： 添加图片，图片也是一个链接</p>
<pre><code>&lt;p class=&quot;ttx-movie-text&quot;&gt;
     &lt;a onclick=&quot;myonclickhrf(${ans.data[i].id})&quot; &gt;${ans.data[i].name}&lt;/a&gt;
         &lt;strong&gt;${ans.data[i].score}&lt;/strong&gt;
&lt;/p&gt;
</code></pre><p>第三层div: 添加文字描述，文字也是链接</p>
<pre><code>$(&quot;.ttx-movie-container&quot;).empty().append(str);
</code></pre><p>jquery方法：取<strong>class</strong>为<em>ttx-movie-container</em>，<a href="http://www.w3school.com.cn/jquery/jquery_dom_remove.asp" target="_blank" rel="noopener">empty()</a>将原本属于<em>ttx-movie-container</em>的子节点以及其文本内容清除（不包括本身），<a href="http://www.w3school.com.cn/jquery/jquery_dom_add.asp" target="_blank" rel="noopener">append()</a>为<em>ttx-movie-container</em>添加刚刚动态创建的新节点和内容。</p>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><p>先向后台取回所有数据，点击目标页后，先清空页面上的已有数据后加载目标页所需要的第一个到最后一个数据，分页完毕。做到了页面部分刷新，且不用多次请求数据。</p>
<hr>
<h3 id="扩展："><a href="#扩展：" class="headerlink" title="扩展："></a>扩展：</h3><p>可以延伸一些小功能，如：</p>
<p><strong>按输入页数查询：</strong></p>
<p>可以在</p>
<pre><code>&lt;nav aria-label=&quot;...&quot;&gt; &lt;/nav&gt;
</code></pre><p>后添加一个input的搜索框，前端取得数据后将输入结果赋给<strong>mycurrentnum</strong></p>
<p><strong>让用户控制页数</strong></p>
<p>也可添加一个input输入框，将*16的16作为传入参数<strong>cout（自定义）</strong>，前端取得数据后将输入结果赋给<strong>cout</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/load-picture-optimization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/load-picture-optimization/" itemprop="url">图片加载优化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/load-picture-optimization/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/load-picture-optimization/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="图片加载优化"><a href="#图片加载优化" class="headerlink" title="图片加载优化"></a>图片加载优化</h1><h2 id="图片加载存在的问题"><a href="#图片加载存在的问题" class="headerlink" title="图片加载存在的问题"></a>图片加载存在的问题</h2><ol>
<li>启动页面加载过多图片</li>
<li>部分图片体积过大</li>
</ol>
<h2 id="后果"><a href="#后果" class="headerlink" title="后果"></a>后果</h2><p>会导致页面加载速度慢，页面出现空白区域，浪费流量等等问题。</p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><ol>
<li><strong>用css,svg,canvas,iconfont代替图片</strong>。</li>
<li><strong>使用矢量图替代位图</strong>。<strong>矢量图</strong>使用直线和曲线来描述图形，这些图形的元素是一些点、线、矩形、多边形、圆和弧线等等，它们都是通过数学公式计算获得的。例如一幅花的矢量图形实际上是由线段形成外框轮廓。<strong>位图</strong>亦称为点阵图像或绘制图像，是由称作像素（图片元素）的单个点组成的。这些点可以进行不同的排列和染色以构成图样。当放大位图时，可以看见赖以构成整个图像的无数单个方块。</li>
<li>使用适当的<strong>图片格式进行单位像素优化</strong>。<a href="http://jixianqianduan.com/frontend-weboptimize/2015/11/17/front-end-image-optmize.html" target="_blank" rel="noopener">常用web图片</a>格式如下：</li>
</ol>
<p><img src="https://wx3.sinaimg.cn/mw690/006P0MECgy1foa8rl3qgyj30pt0n1tab.jpg" alt="图片格式"></p>
<ol start="4">
<li>按照HTTP协议设置合理的<strong>缓存</strong>。<a href="http://www.alloyteam.com/2016/03/discussion-on-web-caching/" target="_blank" rel="noopener">缓存</a></li>
<li><p> ①使用CSS或者JS进行<strong>预加载</strong> 。如：</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-img:url(http://example.com/1.jpg)</span><br></pre></td></tr></table></figure>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> images = <span class="keyword">new</span> <span class="built_in">Array</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">images[i] = <span class="keyword">new</span> Image()</span><br><span class="line"></span><br><span class="line">images[i].src = <span class="string">`http://example.com/<span class="subst">$&#123;i&#125;</span>.jpg`</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> ②显性预加载：指处于预加载过程时页面有明确的加载提示，比如进度条或者是Loading图标。</p>
<p> ③隐形预加载：通过推进触屏页面进度的趣味互动的方式。</p>
</li>
<li><p>利用<strong>雪碧图</strong>，减少请求次数。</p>
</li>
<li>对大部分图片，特别是轮播广告中的图片进行<strong>按设备尺寸裁剪</strong>，减少图片体积，减少网络开销，加快下载速率。不要用大的图再在HTML缩小，要多大图用多大图。</li>
<li><p><strong>懒加载</strong>。<a href="https://zhuanlan.zhihu.com/p/33370207" target="_blank" rel="noopener">优先加载</a>所见屏幕需要的图片。原理：<br>①先将图片的实际src，记录在data-set属性中。<br>②监听屏幕滚动，计算图片的Y坐标，并计算可视区域的高度height，当Y小于等于(height+scrollTop)时，图片的src的值用data-src的来替换，从而来实现图片的懒加载。</p>
</li>
<li><p><strong>使用base64编码代替图片</strong>，但是只适用于图片大小小于2KB且图片引用次数不多的情景。</p>
</li>
<li><p><strong>图片压缩</strong>。</p>
<p>部分平台：</p>
<p>Kraken (Web) 主页： <a href="https://kraken.io/" target="_blank" rel="noopener">https://kraken.io/</a></p>
<p>智图 主页： <a href="http://zhitu.tencent.com/" target="_blank" rel="noopener">http://zhitu.tencent.com/</a> 支持原图png转为jpeg和webp(目前不支持bpg)，并提供各种压缩比压缩，目前在tx内部广泛使用。</p>
</li>
<li><strong>响应式图片</strong>。通过picture元素，picturefill或平台判断来为不同终端平台输出不同的图片 。</li>
</ol>
<p>参考链接：</p>
<ul>
<li><a href="https://aotu.io/notes/2016/03/09/img-loading-optimization-in-mobile/index.html" target="_blank" rel="noopener">让图片加载这件事儿变得更美好</a></li>
<li><a href="https://www.zhihu.com/question/21815101" target="_blank" rel="noopener">前端开发中，对图片的优化技巧有哪些？</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/33370207" target="_blank" rel="noopener">网页图片加载优化方案</a></li>
<li><a href="http://jixianqianduan.com/frontend-weboptimize/2015/11/17/front-end-image-optmize.html" target="_blank" rel="noopener">web前端图片极限优化策略</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/loadOptimization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/loadOptimization/" itemprop="url">web加载优化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T15:14:43+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/loadOptimization/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/loadOptimization/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="web加载优化"><a href="#web加载优化" class="headerlink" title="web加载优化"></a>web加载优化</h1><p>参考链接</p>
<ol>
<li><a href="http://web.jobbole.com/87686/" target="_blank" rel="noopener">如何运用最新的技术提升网页速度和性能</a></li>
<li><a href="http://www.alloyteam.com/2017/01/react-from-scratch-server-render/" target="_blank" rel="noopener">从零开始React服务器渲染</a></li>
<li><a href="http://www.css88.com/react/docs/react-dom-server.html" target="_blank" rel="noopener">ReactDOMServer</a></li>
<li><a href="https://github.com/xunleif2e/vue-lazy-component/blob/master/src/VueLazyComponent.vue" target="_blank" rel="noopener">vue-lazy-component</a></li>
</ol>
<h2 id="方法："><a href="#方法：" class="headerlink" title="方法："></a>方法：</h2><ol>
<li><strong>使用textarea标签包裹HTML/JS/CSS代码</strong>, 当作textarea的value值, 在页面渲染的时候实际并没有渲染到DOM树上, 而是与图片懒加载类似, 当textarea标签出现或即将出现在用户视野时, 将textarea中的HTML代码取出, 用innerHTML动态插入到DOM树中, 如有必要使用正则取出js/css代码动态执行.<br>例子：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loading"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">"datalazyload"</span> <span class="attr">style</span>=<span class="string">"visibility: hidden;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"><span class="selector-class">.lazy</span> &#123;<span class="attribute">width</span>: <span class="number">300px</span>; <span class="attribute">height</span>: <span class="number">168px</span>; <span class="attribute">background</span>: <span class="number">#333</span>;&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="built_in">console</span>.log(<span class="string">'eval success'</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">'lazy'</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loading"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">"datalazyload"</span> <span class="attr">style</span>=<span class="string">"visibility: hidden;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"><span class="selector-class">.lazy</span> &#123;<span class="attribute">width</span>: <span class="number">300px</span>; <span class="attribute">height</span>: <span class="number">168px</span>; <span class="attribute">background</span>: <span class="number">#444</span>;&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="built_in">console</span>.log(<span class="string">'eval success'</span>);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">'lazy'</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>资源压缩</strong></li>
</ol>
<p>步骤:</p>
<ul>
<li><p>npm install compression</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> compression = <span class="built_in">require</span>(<span class="string">'compression'</span>)</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line">app.use(compression());</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="3">
<li><p><strong>图片压缩</strong>，减小图片大小， 推荐：“色彩笔压缩工具”</p>
</li>
<li><p><strong>懒加载</strong></p>
</li>
</ol>
<ul>
<li><p>图片懒加载<br> 实现原理：判断是否出现在屏幕可视区域，若出现则给img的src赋值并配以动画</p>
<ul>
<li><p>原生js懒加载</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line"><span class="comment">/*包裹结构 </span></span><br><span class="line"><span class="comment">&lt;image-containner&gt;</span></span><br><span class="line"><span class="comment">    &lt;img&gt;</span></span><br><span class="line"><span class="comment">    &lt;img&gt;</span></span><br><span class="line"><span class="comment">     ...</span></span><br><span class="line"><span class="comment"> &lt;/image-containner&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadImg</span>(<span class="params">domArr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i&lt;arr.length;i++)&#123;</span><br><span class="line">        <span class="comment">/*getBoundingClientRect() Returns a TextRectangle object. Each rectangle has four integer properties (top, left, right, and bottom) that represent a coordinate of the rectangle, in pixels.</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        获得页面中某个元素的左，上，右和下分别相对浏览器视窗的位置</span></span><br><span class="line"><span class="comment">        document.documentElement.clientHeight 在w3c标准下表示页面可见区域的高度</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">if</span>(domArr[i].getBoundingClientRect().top&lt;<span class="built_in">document</span>.documentElement.clientHeight&amp;&amp;!domArr[i].isLoad)&#123;</span><br><span class="line">            domArr[i].isLoad = <span class="literal">true</span>;</span><br><span class="line">            (<span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">                setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">                    if(domArr[i].dataset</span>) </span>&#123; </span><br><span class="line">                        <span class="comment">/*兼容不支持data的浏览器*/</span></span><br><span class="line">                        addSrc(domArr[i], domArr[i].dataset.imgurl);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        addSrc(domArr[i], domArr[i].getAttribute(<span class="string">"data-imgurl"</span>));</span><br><span class="line">                        &#125;</span><br><span class="line">                        domArr[i].style.cssText = <span class="string">"transition: 1s; opacity: 1;"</span> </span><br><span class="line">                        <span class="comment">/*动态效果*/</span></span><br><span class="line">                    &#125;)(i);<span class="comment">/*立即执行*/</span></span><br><span class="line">                ))</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addSrc</span>(<span class="params">obj, url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> oImg = <span class="keyword">new</span> Image();</span><br><span class="line">    oImg.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     obj.src = oImg.src; <span class="comment">/*下载完成后将该图片赋给目标obj目标对象*/</span></span><br><span class="line">    &#125;</span><br><span class="line">    oImg.src = url; <span class="comment">/*oImg对象先下载该图像*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> Images =  <span class="built_in">document</span>.getElementById(<span class="string">"img-containner"</span>).getElementsByTagName(<span class="string">"img"</span>);<span class="comment">/*生成一个数组，每个元素都是img-containner里的img DOM*/</span></span><br><span class="line">loadImg(aImages);</span><br><span class="line"><span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="comment">/*滚动条滚动触发*/</span></span><br><span class="line">    loadImg(aImages);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>vue.js图片懒加载</p>
<p>原理：监听位置，控制是否加载。下面我们来研究vue-lazy-component 插件的源码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br></pre></td><td class="code"><pre><span class="line">        <span class="tag">&lt;<span class="name">vue-lazy-component</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">init</span>=<span class="string">"init"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">beforeInit</span>=<span class="string">"beforeInit"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- real component--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">st-series-sohu</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- skeleton component --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">st-series-sohu-skeleton</span> <span class="attr">slot</span>=<span class="string">"skeleton"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">vue-lazy-component</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transition-group</span> <span class="attr">:tag</span>=<span class="string">"tagName"</span> <span class="attr">name</span>=<span class="string">"lazy-component"</span> <span class="attr">style</span>=<span class="string">"position: relative;"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">before-enter</span>=<span class="string">"(el) =&gt; $emit('before-enter', el)"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">before-leave</span>=<span class="string">"(el) =&gt; $emit('before-leave', el)"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">after-enter</span>=<span class="string">"(el) =&gt; $emit('after-enter', el)"</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">after-leave</span>=<span class="string">"(el) =&gt; $emit('after-leave', el)"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"isInit"</span> <span class="attr">key</span>=<span class="string">"component"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:loading</span>=<span class="string">"loading"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">"$slots.skeleton"</span> <span class="attr">key</span>=<span class="string">"skeleton"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"skeleton"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span> <span class="attr">key</span>=<span class="string">"loading"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        name: <span class="string">'VueLazyComponent'</span>,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        props: &#123;</span></span><br><span class="line"><span class="undefined">          timeout: &#123;</span></span><br><span class="line"><span class="javascript">            type: <span class="built_in">Number</span></span></span><br><span class="line"><span class="undefined">          &#125;,</span></span><br><span class="line"><span class="undefined">          tagName: &#123;</span></span><br><span class="line"><span class="javascript">            type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">            <span class="keyword">default</span>: <span class="string">'div'</span></span></span><br><span class="line"><span class="undefined">          &#125;,</span></span><br><span class="line"><span class="undefined">          viewport: &#123;</span></span><br><span class="line"><span class="javascript">            type: <span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">'undefined'</span> ? <span class="built_in">window</span>.HTMLElement : <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">            <span class="keyword">default</span>: <span class="function"><span class="params">()</span> =&gt;</span> <span class="literal">null</span></span></span><br><span class="line"><span class="undefined">          &#125;,</span></span><br><span class="line"><span class="undefined">          threshold: &#123;</span></span><br><span class="line"><span class="javascript">            type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">            <span class="keyword">default</span>: <span class="string">'0px'</span></span></span><br><span class="line"><span class="undefined">          &#125;,</span></span><br><span class="line"><span class="undefined">          direction: &#123;</span></span><br><span class="line"><span class="javascript">            type: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">            <span class="keyword">default</span>: <span class="string">'vertical'</span></span></span><br><span class="line"><span class="undefined">          &#125;,</span></span><br><span class="line"><span class="undefined">          maxWaitingTime: &#123;</span></span><br><span class="line"><span class="javascript">            type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">            <span class="keyword">default</span>: <span class="number">50</span></span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        data () &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">            isInit: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">            timer: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">            io: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">            loading: <span class="literal">false</span></span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        created () &#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 如果指定timeout则无论可见与否都是在timeout之后初始化</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (<span class="keyword">this</span>.timeout) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">this</span>.init()</span></span><br><span class="line"><span class="javascript">            &#125;, <span class="keyword">this</span>.timeout)</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        mounted () &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (!<span class="keyword">this</span>.timeout) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 根据滚动方向来构造视口外边距，用于提前加载</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> rootMargin</span></span><br><span class="line"><span class="javascript">            <span class="keyword">switch</span> (<span class="keyword">this</span>.direction) &#123;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">case</span> <span class="string">'vertical'</span>:</span></span><br><span class="line"><span class="javascript">                rootMargin = <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.threshold&#125;</span> 0px`</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">break</span></span></span><br><span class="line"><span class="javascript">              <span class="keyword">case</span> <span class="string">'horizontal'</span>:</span></span><br><span class="line"><span class="javascript">                rootMargin = <span class="string">`0px <span class="subst">$&#123;<span class="keyword">this</span>.threshold&#125;</span>`</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">break</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 观察视口与组件容器的交叉情况</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// intersectionObserver解决目标元素与视口产生一个交叉区，所以这个 API 叫做"交叉观察器"，比如在web网页开发中，常常需要了解某个元素是否进入了"视口"（viewport），即用户能不能看到它。</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.io = <span class="keyword">new</span> <span class="built_in">window</span>.IntersectionObserver(<span class="keyword">this</span>.intersectionHandler, &#123;</span></span><br><span class="line"><span class="undefined">              rootMargin,</span></span><br><span class="line"><span class="javascript">              root: <span class="keyword">this</span>.viewport,</span></span><br><span class="line"><span class="javascript">              threshold: [ <span class="number">0</span>, <span class="built_in">Number</span>.MIN_VALUE, <span class="number">0.01</span>]</span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="javascript">            <span class="comment">// root：The element that is used as the viewport for checking visiblity of the target. Must be the ancestor of the target. Defaults to the browser viewport if not specified or if null.</span></span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="javascript">            <span class="comment">// rootMargin：Margin around the root. Can have values similar to the CSS margin property, e.g. "10px 20px 30px 40px" (top, right, bottom, left). The values can be percentages. This set of values serves to grow or shrink each side of the root element's bounding box before computing intersections. Defaults to all zeros.</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">// threshold：交叉区域大小[0,1],也是触发回调函数的条件,即第一个参数</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.io.observe(<span class="keyword">this</span>.$el)</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        beforeDestroy () &#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 在组件销毁前取消观察</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (<span class="keyword">this</span>.io) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.io.unobserve(<span class="keyword">this</span>.$el)</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        methods: &#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 交叉情况变化处理函数</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">          intersectionHandler (entries) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (</span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">                <span class="comment">//time：可见性发生变化的时间，是一个高精度时间戳，单位为毫秒</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">               <span class="comment">// target：被观察的目标元素，是一个 DOM 节点对象</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">               <span class="comment">// rootBounds：根元素的矩形区域的信息，getBoundingClientRect()方法的返回值，如果没有根元素（即直接相对于视口滚动），则返回null</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">               <span class="comment">// boundingClientRect：目标元素的矩形区域的信息</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">               <span class="comment">// intersectionRect：目标元素与视口（或根元素）的交叉区域的信息</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">               <span class="comment">// intersectionRatio：目标元素的可见比例，即intersectionRect占boundingClientRect的比例，完全可见时为1，完全不可见时小于等于0 </span></span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="undefined">                </span></span><br><span class="line"><span class="javascript">              <span class="comment">// 正在交叉</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">              entries[0].isIntersecting ||</span></span><br><span class="line"><span class="javascript">              <span class="comment">// 交叉率大于0</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">              entries[0].intersectionRatio</span></span><br><span class="line"><span class="undefined">            ) &#123;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">this</span>.init()</span></span><br><span class="line"><span class="javascript">              <span class="keyword">this</span>.io.unobserve(<span class="keyword">this</span>.$el)</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">          &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">          <span class="comment">// 处理组件和骨架组件的切换</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">          init () &#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 此时说明骨架组件即将被切换</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.$emit(<span class="string">'beforeInit'</span>)</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.$emit(<span class="string">'before-init'</span>)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 此时可以准备加载懒加载组件的资源</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.loading = <span class="literal">true</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 由于函数会在主线程中执行，加载懒加载组件非常耗时，容易卡顿</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 所以在requestAnimationFrame回调中延后执行</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.requestAnimationFrame(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">this</span>.isInit = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">              <span class="keyword">this</span>.$emit(<span class="string">'init'</span>)</span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="undefined">          &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">          requestAnimationFrame (callback) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 防止等待太久没有执行回调</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 设置最大等待时间</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">if</span> (<span class="keyword">this</span>.isInit) <span class="keyword">return</span></span></span><br><span class="line"><span class="undefined">              callback()</span></span><br><span class="line"><span class="javascript">            &#125;, <span class="keyword">this</span>.maxWaitingTime)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="comment">/*兼容不支持requestAnimationFrame 的浏览器*/</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="function">(<span class="params"><span class="built_in">window</span>.requestAnimationFrame || ((callback</span>) =&gt;</span> setTimeout(callback, <span class="number">1000</span> / <span class="number">60</span>)))(callback)</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">还有vue组件懒加载</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5. 服务器渲染</span><br><span class="line">原理:将htmlDOM渲染以及数据先在服务器端处理，再通过传字符串的方式传到客户端</span><br><span class="line"></span><br><span class="line">react版本：</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">  // server/page.js</span><br><span class="line">var React = require('react');</span><br><span class="line">var ReactDOMServer = require("react-dom/server");</span><br><span class="line"></span><br><span class="line">var App = require('../app/App');</span><br><span class="line"></span><br><span class="line">var ReactDOM = require('react-dom');</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module.exports = function(props) &#123;</span><br><span class="line">  //ReactDOMServer 对象使你能够将组件渲染为静态标记。 通常，它在 Node 服务器上使用：</span><br><span class="line">  //renderToString()将 React 元素渲染到其初始 HTML 中。 该函数应该只在服务器上使用。 React 将返回一个 HTML 字符串。 您可以使用此方法在服务器上生成 HTML ，并在初始请求时发送标记，以加快网页加载速度，并允许搜索引擎抓取你的网页以实现 SEO 目的。</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  // 在服务器上使用 renderToString ，而在客户端上使用 ReactDOM.hydrate() 。</span><br><span class="line">	var content = ReactDOMServer.renderToString(</span><br><span class="line">		<span class="tag">&lt;<span class="name">App</span> <span class="attr">initialCount</span>=<span class="string">&#123;props.initialCount&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">App</span>&gt;</span></span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">	var propsScript = 'var APP_PROPS = ' + JSON.stringify(props);</span><br><span class="line">	//renderToStaticMarkup(),类似于 renderToString,除了这不会创建 React 在内部使用的额外DOM属性，如 data-reactroot。如果你打算使用客户端上的 React ，使标记具有交互性，请不要使用此方法。</span><br><span class="line">	var html = ReactDOMServer.renderToStaticMarkup(</span><br><span class="line">		<span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;</span></span></span><br><span class="line"><span class="tag">					&#123;<span class="attr">__html:</span> <span class="attr">content</span>&#125;</span></span><br><span class="line"><span class="tag">				&#125; /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">script</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;</span></span></span><br><span class="line"><span class="tag">					&#123;<span class="attr">__html:</span> <span class="attr">propsScript</span>&#125;</span></span><br><span class="line"><span class="tag">				&#125;&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&#123;</span>"<span class="attr">assets</span>/<span class="attr">entry.generator.js</span>"&#125;&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">	);</span><br><span class="line"></span><br><span class="line">	return html;</span><br><span class="line">&#125;</span><br><span class="line">  // server/index.js</span><br><span class="line">  var express = require('express');</span><br><span class="line">var path = require('path');</span><br><span class="line"></span><br><span class="line">var page = require("./page.generator.js").page;</span><br><span class="line"></span><br><span class="line">var app = express();</span><br><span class="line">var port = 8082;</span><br><span class="line"></span><br><span class="line">app.use(express.static(path.join(__dirname, '..', 'public')));</span><br><span class="line"></span><br><span class="line">app.get('/', function(req, res) &#123;</span><br><span class="line">	var props = &#123;</span><br><span class="line">		initialCount: 9</span><br><span class="line">	&#125;;</span><br><span class="line">	var html = page(props);</span><br><span class="line">	res.end(html);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(port, function() &#123;</span><br><span class="line">	console.log('Listening on port %d', port);</span><br><span class="line">&#125;);</span><br><span class="line">// App.js</span><br><span class="line">var React = require('react');</span><br><span class="line"></span><br><span class="line">var App = React.createClass(&#123;</span><br><span class="line">	getInitialState: function() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            count: this.props.initialCount</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    _increment: function() &#123;</span><br><span class="line">        this.setState(&#123; count: this.state.count + 1 &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">	render: function() &#123;</span><br><span class="line">		return (</span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">span</span>&gt;</span>the count is: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">span</span> <span class="attr">onClick</span>=<span class="string">&#123;this._increment&#125;</span>&gt;</span>&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">module.exports = App;</span><br><span class="line">//entry.js</span><br><span class="line">var React = require('react'),</span><br><span class="line">	ReactDOM = require('react-dom'),</span><br><span class="line">	App = require('./App');</span><br><span class="line"></span><br><span class="line">var APP_PROPS = window.APP_PROPS || &#123;&#125;;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">	<span class="tag">&lt;<span class="name">App</span> <span class="attr">initialCount</span>=<span class="string">&#123;APP_PROPS.initialCount&#125;/</span>&gt;</span>,</span><br><span class="line">	document.getElementById('root')</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T14:47:22+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/hello-world/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/hello-world/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/jsonp&promise/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/jsonp&promise/" itemprop="url">jsonp and promise</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T00:00:00+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/jsonp&promise/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/jsonp&promise/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="jsonp解决跨域"><a href="#jsonp解决跨域" class="headerlink" title="jsonp解决跨域"></a>jsonp解决跨域</h2><p><strong>实现思路:</strong></p>
<ol>
<li>前端创建回调函数，假设为callback()，函数中是对返回的数据的操作</li>
<li>前端动态创建script 元素</li>
<li>将script的src设为服务器路由地址，pathname中一个参数为funcName = callback</li>
<li>后台服务器处理url，接收数据参数以及分解出”callback”这个函数名</li>
<li>后台服务器处理完后返回”callback(params)”这个字符串，params是本来应该返回的json数据</li>
<li>前端接到返回的数据后执行callback函数，完成跨域</li>
</ol>
<p>例子:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml">    //添加<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined">标签的方法</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">addScriptTag</span>(<span class="params">src</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span></span><br><span class="line"><span class="javascript">        script.setAttribute(<span class="string">"type"</span>,<span class="string">"text/javascript"</span>);</span></span><br><span class="line"><span class="undefined">        script.src = src;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.body.appendChild(script);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//搜索apple，将自定义的回调函数名result传入callback参数中</span></span></span><br><span class="line"><span class="javascript">        addScriptTag(<span class="string">"http://ajax.googleapis.com/ajax/services/search/web?v=1.0&amp;q=apple&amp;funcName=callback"</span>);</span></span><br><span class="line"><span class="undefined">        </span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="comment">//自定义的回调函数result</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//我们就简单的获取apple搜索结果的第一条记录中url数据</span></span></span><br><span class="line"><span class="undefined">        alert(data);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>参考:<br><a href="www.cnblogs.com/September-sheep/p/7942465.html">jsonp实现跨域 </a><br><a href="http://www.cnblogs.com/chopper/archive/2012/03/24/2403945.html" target="_blank" rel="noopener">深入浅出JSONP–解决ajax跨域问题</a></p>
<h1 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h1><p>Promise 有自己的状态(state):</p>
<pre><code>Fulfilled： 成功

Rejected：拒绝

Pending： 进行中
</code></pre><blockquote>
<p> 当new 一个Promise对象的时候， 我们能接收到两个方法参数： resolve和reject, 当调用 resolve方法的时候，会把Promise对象的状态从Pending变为Fulfilled（表示异步操作成功了），当调用 reject方法的时候， 会把Promise对象的状态从Pending变为Rejected，表示异步操作失败了， 而如果这两个函数没有调用，则Promise对象的状态一直是Pending（表示异步操作正在进行）</p>
</blockquote>
<p>使用方法:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line">     <span class="keyword">if</span>(<span class="comment">/*异步操作成功*/</span>)&#123;</span><br><span class="line">         resolve(value);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         reject(err);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="comment">//处理返回数据：</span></span><br><span class="line"></span><br><span class="line"> promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">     <span class="comment">//成功</span></span><br><span class="line"> &#125;,<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line">     <span class="comment">//失败</span></span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>不用promise写回调函数可能产生的bug</p>
<ul>
<li>函数调用时间不确定，可能异步可能同步</li>
<li>调用时间过多</li>
<li>调用时间太晚或者根本没有调用</li>
<li>错误无法捕捉</li>
<li>代码太冗余，难以理解</li>
</ul>
</li>
<li><p>使用情况</p>
<ul>
<li><p>“链式”:多个回调函数，上一个回调函数的返回值是下一个回调函数的参数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//每一个then里面的异步操作可以返回一个值，传递给下一个异步操作</span></span><br><span class="line">promise.then(</span><br><span class="line"></span><br><span class="line">).then(</span><br><span class="line"></span><br><span class="line">).then(</span><br><span class="line"></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>“门”:多个异步都得到结果后对所有结果进行综合处理。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.all([</span><br><span class="line">    promise1,</span><br><span class="line">    promise2</span><br><span class="line">    ])</span><br><span class="line">.then(<span class="function">(<span class="params">[data1, data2]</span>) =&gt;</span>  getDataAndDoSomething (data1,data2)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>all方法接收一个大Promise数组，并返回一个新的大“Promise”，只有所有的Promise的状态都是Fulfilled，这个大Promise才能转化为成功，参数与数组中的promise相对应</p>
</blockquote>
</li>
<li><p>“竞态”：一组异步操作，其中一个完成了， 这组异步操作便算是整体完成了。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="built_in">Promise</span>.race([p1, p2, p3]);</span><br><span class="line"><span class="comment">//只要p1、p2、p3之中有一个Promise率先改变状态，p的状态就跟着改变。那个率先改变的 Promise 实例的返回值，就传递给p的回调函数</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<pre><code>参考: [【javascript】异步编年史，从“纯回调”到Promise](http://www.cnblogs.com/penghuwan/p/7451409.html)
</code></pre><h2 id="同步，异步，阻塞，非阻塞的关系"><a href="#同步，异步，阻塞，非阻塞的关系" class="headerlink" title="同步，异步，阻塞，非阻塞的关系"></a>同步，异步，阻塞，非阻塞的关系</h2><h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><blockquote>
<p>同步是两个对象之间的关系，而阻塞是一个对象的状态。</p>
</blockquote>
<h3 id="本质上并没有关系"><a href="#本质上并没有关系" class="headerlink" title="本质上并没有关系"></a>本质上并没有关系</h3><ul>
<li>同步与异步是关于指令执行顺序的。</li>
<li>阻塞非阻塞是关于线程与进程的。</li>
<li>两者本身并没有必然的关联系。</li>
</ul>
<h3 id="同步和异步"><a href="#同步和异步" class="headerlink" title="同步和异步"></a>同步和异步</h3><blockquote>
<p>同步和异步关注的是消息通讯机制。<br>所谓同步，就是在发出一个“调用”时，在没有得到结果之前，该“调用”就不返回。但是一旦调用返回，就得到返回值了。就是指“调用者”主动等待这个“调用的”结果。而异步则是相反，“调用”在发出之后，这个调用就直接返回了，所以没有返回结果。换句话说，当一个异步过程调用发出后，调用者不会立刻得到结果。而是在“调用”发出后，“被调用者”通过状态、通知来通知调用者，或通过回调函数处理这个调用。 </p>
</blockquote>
<p>同步：执行一个操作之后，等待结果，然后才继续执行后续的操作。</p>
<p>异步：执行一个操作后，可以去执行其他的操作，然后等待通知再回来执行刚才没执行完的操作。</p>
<h3 id="阻塞与非阻塞"><a href="#阻塞与非阻塞" class="headerlink" title="阻塞与非阻塞"></a>阻塞与非阻塞</h3><blockquote>
<p>阻塞和非阻塞关注的是程序在等待调用结果（消息，返回值）时的状态。<br>阻塞调用是指调用结果返回之前，当前线程会被挂起。调用线程只有在得到结果之后才会返回。非阻塞调用指在不能立刻得到结果之前，该调用不会阻塞当前线程。</p>
</blockquote>
<p>阻塞：进程给CPU传达一个任务之后，一直等待CPU处理完成，然后才执行后面的操作。</p>
<p>非阻塞：进程给CPU传达任务后，继续处理后续的操作，隔断时间再来询问之前的操作是否完成。这样的过程其实也叫轮询。</p>
<p>参考:<br><a href="https://www.zhihu.com/question/19732473" target="_blank" rel="noopener">知乎问题</a><br><a href="http://xiaoh.me/2016/05/31/sync-async/" target="_blank" rel="noopener">同步，异步，阻塞，非阻塞的理解</a><br><a href="https://github.com/calidion/calidion.github.io/issues/40" target="_blank" rel="noopener">同步，异步，阻塞，非阻塞等关系轻松理解</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/Cross-page transmission/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/Cross-page transmission/" itemprop="url">跨页面传输</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T00:00:00+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/Cross-page transmission/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/Cross-page transmission/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="跨页面传输"><a href="#跨页面传输" class="headerlink" title="跨页面传输"></a>跨页面传输</h1><h2 id="本次小组采用的是利用url参数跨页面传输数据，核心代码如下："><a href="#本次小组采用的是利用url参数跨页面传输数据，核心代码如下：" class="headerlink" title="本次小组采用的是利用url参数跨页面传输数据，核心代码如下："></a>本次小组采用的是利用url参数跨页面传输数据，核心代码如下：</h2><p><strong>点击电影图片触发函数，给url添加参数</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function myonclickhrf(myid) &#123;</span><br><span class="line">    let myname = $(&apos;.ysj-login-name&apos;).html();</span><br><span class="line">    if(myname)&#123;</span><br><span class="line">        window.location.href = &quot;/moviecontain.html?id=&quot;+myid+&quot;&amp;name=&quot;+myname</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        window.location.href = &quot;/moviecontain.html?id=&quot;+myid+&quot;&amp;name=&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>其中参数<strong>myid</strong>可以是后台传来的用户ID，也可以是从html中获取的用户ID，视情况而定。</p>
<hr>
<p><strong>将url参数取出，如果参数存在则利用参数显示用户名，如果不存在则显示固定内容</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let myurl = window.location.href.split(&quot;?id=&quot;);</span><br><span class="line">myurl = [myurl[1].split(&apos;&amp;name=&apos;)[1], myurl[1].split(&apos;&amp;name=&apos;)[0]];</span><br><span class="line">if (myurl[0]) &#123;</span><br><span class="line">    $(&apos;.ysjLogin&apos;).html(&quot;你好&quot; + myurl[0]);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    bootbox.alert(&quot;您未登录，请去主页进行登录注册！&quot;);</span><br><span class="line">    $(&apos;.ysjLogin&apos;).html(&quot;你好,游客！&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="从而实现通过url参数判断用户登陆状态"><a href="#从而实现通过url参数判断用户登陆状态" class="headerlink" title="从而实现通过url参数判断用户登陆状态"></a>从而实现通过url参数判断用户登陆状态</h3><hr>
<h2 id="知识延伸"><a href="#知识延伸" class="headerlink" title="知识延伸"></a>知识延伸</h2><h3 id="其他跨页面消息传输方法"><a href="#其他跨页面消息传输方法" class="headerlink" title="其他跨页面消息传输方法"></a>其他跨页面消息传输方法</h3><ol>
<li><strong>用窗口对象的message事件监控</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">接收从其它窗口发来的消息</span><br><span class="line"></span><br><span class="line"> window.addEventListener(&apos;message&apos;,functio()&#123;&#125;,false);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">向其它窗口发送消息</span><br><span class="line"></span><br><span class="line">otherwindow.postMessage(message,targetOrigin);</span><br><span class="line"></span><br><span class="line">参数message为所发送的消息，可以为静态内容也可以为javascript对象</span><br><span class="line"></span><br><span class="line">参数targetOrigin为接收消息的对象窗口的url地址</span><br></pre></td></tr></table></figure>
<p>otherWindow为要发送窗口对象的引用,可以通过window.open返回该对象,或通过对window.frames数组制定序号或名字的方式来返回单个frame所属的窗口对象.</p>
<h2 id="栗子-可能有错，待定"><a href="#栗子-可能有错，待定" class="headerlink" title="栗子(可能有错，待定)"></a>栗子(可能有错，待定)</h2><p>在本例中，我们需要接收<strong>index.html</strong>中导航栏里用户名，并将其发送到<strong>moviecontain.html</strong>，如果用户返回<strong>index.html</strong>界面，我们还需要做一个逆向发送的操作。假设装着用户名的div的ID为<strong>username</strong>,监听的端口为8081</p>
<hr>
<p><strong>index.html中JS代码</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(&apos;message&apos;,function(ev)&#123;</span><br><span class="line">          $(&apos;#username&apos;).innerHTML=ev.data;</span><br><span class="line">        &#125;,false);</span><br><span class="line">         function post()&#123;</span><br><span class="line">            let iframe=window.frames[&apos;username&apos;];</span><br><span class="line">            iframe.postMessage($(&apos;#username&apos;).html());</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>index.html中html代码</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe src=&quot;http://127.0.0.1:8081/moviecontain.html&quot; name=&apos;username&apos;&gt;</span><br><span class="line">        &lt;div id=&apos;username&apos;&gt;&lt;/div&gt;</span><br><span class="line"> &lt;/iframe&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>moviecontain.html</strong>中JS代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(&apos;message&apos;,function(ev)&#123;</span><br><span class="line">        $(&apos;#username&apos;).innerHTML=ev.data;</span><br><span class="line">        ev.source.postMessage(ev.data,ev.origin);</span><br><span class="line">    &#125;,false);</span><br></pre></td></tr></table></figure></p>
<p><strong>moviecontain.html</strong>中html代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe src=&quot;http://127.0.0.1:8081/index.html&quot; name=&apos;username&apos;&gt;</span><br><span class="line">        &lt;div id=&apos;username&apos;&gt;&lt;/div&gt;</span><br><span class="line"> &lt;/iframe&gt;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/http/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/http/" itemprop="url">http学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T00:00:00+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/http/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/http/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="http学习"><a href="#http学习" class="headerlink" title="http学习"></a>http学习</h1><p>我本来是打算学习koa，然后写点学习总结。但是当教程中介绍到app.listen(…)时，其中提到app.listen(3000)是http.createServer(app.callback()).listen(3000);的“语法糖”,就让我对http.createSever()方法产生兴趣。于是就开始了追根溯源之旅~</p>
<p><strong>httpcreateServer()</strong></p>
<p>这是node.js封装的一个http模块的方法，从字面意思看出来就是创建一个http服务器，与之相对应的还有个http.request(),即创建一个客户端。<br>一般的用法是这样：</p>
<pre><code>var http = require(&apos;http&apos;);

http.createServer(function(req, res) {

// 主页
if (req.url == &quot;/&quot;) {
    res.writeHead(200, { &quot;Content-Type&quot;: &quot;text/html&quot; });
    res.end(&quot;Welcome to the homepage!&quot;);
}

// About页面
else if (req.url == &quot;/about&quot;) {
    res.writeHead(200, { &quot;Content-Type&quot;: &quot;text/html&quot; });
    res.end(&quot;Welcome to the about page!&quot;);
}

// 404错误
else {
    res.writeHead(404, { &quot;Content-Type&quot;: &quot;text/plain&quot; });
    res.end(&quot;404 error! File not found.&quot;);
}

}).listen(8080, &quot;localhost&quot;);
</code></pre><p>但这仍旧是node.js已经封装好的方法，而我想知道的如何用最原生的语言创建一个http服务器。而在阅读完很多不同语言的实现web服务器的文档后，发现比较核心的有这么2个专业名词。</p>
<p><strong>超文本传送协议HTTP</strong></p>
<p>http是个协议，有固定的格式，不同客户端的不同浏览器向万维网服务器请求万维网文档以及服务器把文档传送给浏览器的时候都要遵守它。</p>
<p>http有以下几个值得注意的特点:</p>
<ol>
<li>面向事务。要么所有的信息交换都完成，要么一次都不进行。</li>
<li>无状态。每一次访问都是独立的，服务器不会记录任何访问之间的关系。</li>
<li><p>http的报文结构</p>
<p> (1). 开始行。区分是请求报文还是响应报文</p>
<p> (2). 首部行。说明浏览器，服务器或者报文主体的一些信息。</p>
<p> (3). 实体主体。</p>
</li>
<li><p>HTTP/1.1协议使用了持续连接，即服务器发送响应后在一段时间内保持与客户端的连接，使得服务器可以继续在连接上发送后续的http请求报文和响应报文。</p>
</li>
</ol>
<p><strong>Socket</strong></p>
<p><img src="https://gss2.bdstatic.com/9fo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=17baf4c7d739b60059c307e588395e4f/d000baa1cd11728b45647b06cafcc3cec3fd2c4c.jpg" alt="socket"></p>
<p>socket本质是编程接口(API)，对TCP/IP的封装，TCP/IP也要提供可供程序员做网络开发所用的接口，这就是Socket编程接口；做个比喻就是：HTTP是轿车，提供了封装或者显示数据的具体形式；而Socket是发动机，提供了网络通信的能力。<br>其中的很多函数可以自己查阅资料。</p>
<h1 id="神经网络学习总结"><a href="#神经网络学习总结" class="headerlink" title="神经网络学习总结"></a>神经网络学习总结</h1><h2 id="什么是神经网络？"><a href="#什么是神经网络？" class="headerlink" title="什么是神经网络？"></a>什么是神经网络？</h2><p>我们把大脑看成是一个高度复杂的，非线性的和并行的计算机器，而神经元就是组织它的组成部分；每当触及听觉，视觉，感觉等需要大脑处理的事件时，神经元就在以超级迅速的速度进行特别地计算。</p>
<pre><code>神经网络是由简单处理单元构成的大规模并行分布式处理器，天然地具有存储经验支持和使之可用地特性。
</code></pre><p>理解：简单处理单元：神经元。并行：同时处理多个进程。分布式：将某个进程分为多个子进程交给不同的神经元处理。通过学习获得并且存储经验。</p>
<pre><code>1. 神经网络是通过学习过程从外界环境中获取知识的。
2. 互连神经元的连接强度，即突触权值，用于存储获取的知识。
</code></pre><h2 id="神经网络有用的性质和能力"><a href="#神经网络有用的性质和能力" class="headerlink" title="神经网络有用的性质和能力"></a>神经网络有用的性质和能力</h2><p>（理解可能有误，不能全信）</p>
<h3 id="非线性"><a href="#非线性" class="headerlink" title="非线性"></a>非线性</h3><p>“人工神经元可以是线性或者非线性的”。当神经网络在处理一个进程时，得到的信息和输出的信息（转化为动作）并不是线性依赖关系。</p>
<h3 id="输入输出映射"><a href="#输入输出映射" class="headerlink" title="输入输出映射"></a>输入输出映射</h3><p>“即教师学习，监督学习。利用带标号的训练样例，通过不断调整突触权值重复训练神经网络，直到神经网络达到对突触权值没有显著修正的稳定状态”。理解为不断得让神经网络获得信息，并且不断地改变突触权值直到输出的信息和目标信息极其相似，并且记录下当时的突触权值。</p>
<h3 id="自适应"><a href="#自适应" class="headerlink" title="自适应"></a>自适应</h3><p>“神经网络具有调整自身突触权值以适应外界环境编号的固有能力”。在环境变化不大时，神经网络看也很容易进行重新训练。在不稳定环境中，它自身可以设计神经网络使得突触权值随时间实时变化。</p>
<h3 id="证据响应"><a href="#证据响应" class="headerlink" title="证据响应"></a>证据响应</h3><p>神经网络在获得信息后会先对信息进行模式分类，其不仅可以设计不同的提供选择哪一个特定模式的信息，还可以排除一些模糊的模式，提高分类性能。</p>
<h3 id="上下文信息"><a href="#上下文信息" class="headerlink" title="上下文信息"></a>上下文信息</h3><p>神经网络的每个神经元都受其它神经元全局活动的潜在影响。</p>
<h3 id="容错性"><a href="#容错性" class="headerlink" title="容错性"></a>容错性</h3><p>当某个神经元或它的连接坏了，其产生的并不是毁灭性的失败，而是缓慢恶化的过程。因为神经网络信息存储是分布的。</p>
<h2 id="人脑中神经网络分层"><a href="#人脑中神经网络分层" class="headerlink" title="人脑中神经网络分层"></a>人脑中神经网络分层</h2><p>中枢神经系统</p>
<p>↑</p>
<p>区域电路</p>
<p>↑</p>
<p>局部电路</p>
<p>↑</p>
<p>神经元</p>
<p>↑</p>
<p>树突树</p>
<p>↑</p>
<p>神经微电路</p>
<p>↑</p>
<p>突触</p>
<p>↑</p>
<p>分子</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/goodreading_1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/goodreading_1/" itemprop="url">神经网络学习总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T00:00:00+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/goodreading_1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/goodreading_1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="神经网络学习总结"><a href="#神经网络学习总结" class="headerlink" title="神经网络学习总结"></a>神经网络学习总结</h1><h2 id="什么是神经网络？"><a href="#什么是神经网络？" class="headerlink" title="什么是神经网络？"></a>什么是神经网络？</h2><p>我们把大脑看成是一个高度复杂的，非线性的和并行的计算机器，而神经元就是组织它的组成部分；每当触及听觉，视觉，感觉等需要大脑处理的事件时，神经元就在以超级迅速的速度进行特别地计算。</p>
<pre><code>神经网络是由简单处理单元构成的大规模并行分布式处理器，天然地具有存储经验支持和使之可用地特性。
</code></pre><p>理解：简单处理单元：神经元。并行：同时处理多个进程。分布式：将某个进程分为多个子进程交给不同的神经元处理。通过学习获得并且存储经验。</p>
<pre><code>1. 神经网络是通过学习过程从外界环境中获取知识的。
2. 互连神经元的连接强度，即突触权值，用于存储获取的知识。
</code></pre><h2 id="神经网络有用的性质和能力"><a href="#神经网络有用的性质和能力" class="headerlink" title="神经网络有用的性质和能力"></a>神经网络有用的性质和能力</h2><p>（理解可能有误，不能全信）</p>
<h3 id="非线性"><a href="#非线性" class="headerlink" title="非线性"></a>非线性</h3><p>“人工神经元可以是线性或者非线性的”。当神经网络在处理一个进程时，得到的信息和输出的信息（转化为动作）并不是线性依赖关系。</p>
<h3 id="输入输出映射"><a href="#输入输出映射" class="headerlink" title="输入输出映射"></a>输入输出映射</h3><p>“即教师学习，监督学习。利用带标号的训练样例，通过不断调整突触权值重复训练神经网络，直到神经网络达到对突触权值没有显著修正的稳定状态”。理解为不断得让神经网络获得信息，并且不断地改变突触权值直到输出的信息和目标信息极其相似，并且记录下当时的突触权值。</p>
<h3 id="自适应"><a href="#自适应" class="headerlink" title="自适应"></a>自适应</h3><p>“神经网络具有调整自身突触权值以适应外界环境编号的固有能力”。在环境变化不大时，神经网络看也很容易进行重新训练。在不稳定环境中，它自身可以设计神经网络使得突触权值随时间实时变化。</p>
<h3 id="证据响应"><a href="#证据响应" class="headerlink" title="证据响应"></a>证据响应</h3><p>神经网络在获得信息后会先对信息进行模式分类，其不仅可以设计不同的提供选择哪一个特定模式的信息，还可以排除一些模糊的模式，提高分类性能。</p>
<h3 id="上下文信息"><a href="#上下文信息" class="headerlink" title="上下文信息"></a>上下文信息</h3><p>神经网络的每个神经元都受其它神经元全局活动的潜在影响。</p>
<h3 id="容错性"><a href="#容错性" class="headerlink" title="容错性"></a>容错性</h3><p>当某个神经元或它的连接坏了，其产生的并不是毁灭性的失败，而是缓慢恶化的过程。因为神经网络信息存储是分布的。</p>
<h2 id="人脑中神经网络分层"><a href="#人脑中神经网络分层" class="headerlink" title="人脑中神经网络分层"></a>人脑中神经网络分层</h2><p>中枢神经系统</p>
<p>↑</p>
<p>区域电路</p>
<p>↑</p>
<p>局部电路</p>
<p>↑</p>
<p>神经元</p>
<p>↑</p>
<p>树突树</p>
<p>↑</p>
<p>神经微电路</p>
<p>↑</p>
<p>突触</p>
<p>↑</p>
<p>分子</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/learning_c++_chapter1-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/learning_c++_chapter1-2/" itemprop="url">C++ learn</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T00:00:00+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/learning_c++_chapter1-2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/learning_c++_chapter1-2/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><h3 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h3><ul>
<li><strong>const</strong> type name = value //const定义必须赋初始值，后期不能修改</li>
<li>setw(n) 设置输出n个长度，缺少补全</li>
<li>setprecision(n) 设置精确度，即规定小数点后有几位</li>
<li>left，right 设置对齐方向</li>
<li>变量属性： Name(名字),Type(种类),Lifetime(生存时间),Scope(作用域)</li>
<li>没有初始值的变量的值是undefined;</li>
<li>命名规范：1.下划线_开头。2.不允许空格和特殊字符串作为名字 3. 不能是保留字 4. 对大小写敏感 5.小于31个字符</li>
<li>include “simpio.h” 此库包括 GetInterger,GetLong,GetReal,GetLine 方法，等待用户输入一行文字，返回int,long,double,string类型的输入值 例子：n = GetInterger();</li>
<li>输出： 字符串和变量可以用 “&lt;&lt;” 连接 一起输出，如cont&lt;&lt;”The result is”&lt;&lt; val &lt;&lt; endl;</li>
</ul>
<h3 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h3><ul>
<li>枚举类型 <strong>enum</strong> name {element-list}</li>
</ul>
<p>举例：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> directionT &#123;North ,East ,South,West&#125;;</span><br><span class="line"><span class="comment">//创造一个枚举类 directionT</span></span><br><span class="line">directionT dir;</span><br><span class="line"><span class="comment">//再创建一个枚举实例 dir</span></span><br><span class="line"></span><br><span class="line"><span class="function">directionT <span class="title">RightFrom</span> <span class="params">(directionT dir)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> directionT((dir+<span class="number">1</span>)%<span class="number">4</span>);</span><br><span class="line">    <span class="comment">//dir 类似于枚举集合的首个下标</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//directionT(dir) 是枚举集合的首个枚举值</span></span><br><span class="line"><span class="keyword">for</span> (directionT dir  = North;dir &lt;= West;dir = directionT(dir+<span class="number">1</span>))</span><br></pre></td></tr></table></figure></p>
<p>枚举类型每个值有默认值为 枚举下标，比如上例中North的下标为0，默认值为0。如果想赋值，则在定义的时候应该写 enum directionT{North = 10,East},当某个枚举值后面的值没有定义默认值时后面的枚举值的值为此枚举值的值+1，即其中East = 11。</p>
<ul>
<li>sizeof(int)返回参数所需要占的内存大小</li>
<li><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">int</span> *p1 *p2;</span><br><span class="line">x=<span class="number">-42</span>;y=<span class="number">163</span>;</span><br><span class="line">p1=&amp;x;p2=&amp;y;</span><br><span class="line">*p1  <span class="comment">//-42;</span></span><br><span class="line">*p2 <span class="comment">//163;</span></span><br><span class="line">*p1 = <span class="number">17</span>;</span><br><span class="line">x <span class="comment">//17</span></span><br><span class="line">p1 = p2 <span class="comment">// 把p2的地址给p1 则 *p1 等于y</span></span><br><span class="line">*p1 = *p2 <span class="comment">//把p2指向的值赋给*p1 x等于y</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>计算数组有多少个元素，即长度</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> number = <span class="keyword">sizeof</span> a / <span class="keyword">sizeof</span> a[<span class="number">0</span>];</span><br></pre></td></tr></table></figure>
</li>
<li><p>传数组进入函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SumIntegerArray</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> n)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SumIntegerArray</span><span class="params">(<span class="keyword">int</span> *<span class="built_in">array</span>,<span class="keyword">int</span> n)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>结构体与指针</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">employeeRecordT</span>&#123;</span></span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="built_in">string</span> title;</span><br><span class="line">    <span class="built_in">string</span> ssnum;</span><br><span class="line">&#125;;</span><br><span class="line">employeeRecordT *empPtr;</span><br><span class="line">employeeRecordT empRec;</span><br><span class="line">empPtr = &amp;empRec;</span><br><span class="line">*(empPtr.salary);</span><br><span class="line">empPtr-&gt;salary</span><br></pre></td></tr></table></figure>
</li>
<li><p>动态分配</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *ip = <span class="keyword">new</span> <span class="keyword">int</span>;</span><br><span class="line">employeeRecordT *empPtr = <span class="keyword">new</span> emploeeRecordT;</span><br><span class="line"><span class="keyword">int</span> *intList = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">12</span>];<span class="comment">//分配了12个int大小的内存</span></span><br><span class="line"><span class="comment">//和new 配套的释放空间操作</span></span><br><span class="line"><span class="keyword">delete</span> ip;</span><br><span class="line"><span class="keyword">delete</span>[] intList;</span><br></pre></td></tr></table></figure>
</li>
<li><p>库与接口</p>
</li>
</ul>
<p>&lt;random.h&gt;</p>
<p>包括的方法：RandomInteger,RandomReal,RandomChance,Randomize</p>
<ul>
<li><p>接口板式</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _random_h</span></span><br><span class="line"><span class="comment">//如果_random_h在之前就已经定义了则不会执行到endif之间的代码</span></span><br><span class="line">#define_random_h</span><br><span class="line"><span class="comment">//在这里面定义random.h里面的方法</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">RandomInteger</span><span class="params">(<span class="keyword">int</span> low,<span class="keyword">int</span> high)</span></span>;</span><br><span class="line"><span class="comment">//返回两个数间的随机数包括界点</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">RandomReal</span><span class="params">(<span class="keyword">double</span> low, <span class="keyword">double</span> high)</span></span>;</span><br><span class="line"><span class="comment">//[0,1),左闭右开</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">RandomChance</span><span class="params">(<span class="keyword">double</span> p)</span></span>;</span><br><span class="line"><span class="comment">//返回p概率下的布尔值</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Randomize</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//生成一个伪随机数，在同一个运行环境下，每次运行生成的随机数都相同。</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><string>接口 </string></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> str1 = <span class="string">"Hello Word!"</span>;</span><br><span class="line"><span class="keyword">int</span> numChars =str.length();<span class="comment">//返回字符串长度</span></span><br><span class="line">str.at(pos) == str[pos]; </span><br><span class="line"><span class="comment">//两个都返回字符串中下标为pos的字符</span></span><br><span class="line">str.substr(pos,len);</span><br><span class="line"><span class="comment">//返回从pos位置开始的长度为len的字符串，str并没有改变，如果len没给，则到最后一个字符</span></span><br><span class="line">str.find(ch,pos)</span><br><span class="line"><span class="comment">//返回从pos位置开始找等于ch字符的下标，如果没有给pos，则第一个字符开始找。如果没出现，则返回string::npos这个定值</span></span><br><span class="line">str.find(pattern,pos)<span class="comment">//和上面一样，只不过是找pattern这个字符串</span></span><br><span class="line">str.insert(pos,txt)<span class="comment">//将txt从str的pos位置插入</span></span><br><span class="line">str.replace(pos,count,txt)<span class="comment">//将str从pos位置开始的count长度的字符串用txt代替</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>&lt;strutils.h&gt;头文件</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _strutils_h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _strutils_h</span></span><br><span class="line"><span class="meta">#inclde <span class="meta-string">"genlib.h"</span></span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">ConvertToLowerCase</span><span class="params">(<span class="built_in">string</span> s)</span></span>;<span class="comment">//将字母转为小写</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">ConvertToUpperCase</span><span class="params">(<span class="built_in">string</span> s)</span></span>;<span class="comment">//将字母转为大写</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">StringToInteger</span><span class="params">(<span class="built_in">string</span> s)</span></span>;<span class="comment">//将字符串转换成数字</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">IntegerToString</span><span class="params">(<span class="keyword">int</span> n)</span></span>;<span class="comment">//将数字转换成字符串</span></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">RealToString</span><span class="params">(<span class="keyword">double</span> d)</span></span>;<span class="comment">//将浮点数转换成字符串</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">StringToReal</span><span class="params">(<span class="built_in">string</span> s)</span></span>;<span class="comment">//将字符串转换成浮点数</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>转换成C++字符串</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> str = <span class="built_in">string</span>(<span class="string">"Hello"</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>标准输入输出文件&lt;iostream.h&gt;</p>
</li>
<li><p>获取和修改文件内容</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  ifstream infile;<span class="comment">//输入文本流变量</span></span><br><span class="line">  ofstream outfile;<span class="comment">//输出文本流变量</span></span><br><span class="line">  infile.open(<span class="string">"jabberwocky.txt"</span>);<span class="comment">//打开文件，参数是c风格的</span></span><br><span class="line"> <span class="comment">//如果 文件名是变量表示的:</span></span><br><span class="line"> <span class="built_in">string</span> str = ...;</span><br><span class="line"> infile.open(str.c_str());<span class="comment">//将变量str转换成c风格的字符串</span></span><br><span class="line"><span class="comment">//如果 打开文件失败:</span></span><br><span class="line"><span class="keyword">if</span>(infile.fail())Error(<span class="string">"Could not open file"</span>)</span><br><span class="line">infile.clear();</span><br><span class="line"><span class="comment">//数据处理完毕，关闭文件</span></span><br><span class="line">infile.close();</span><br><span class="line"></span><br><span class="line"><span class="built_in">cin</span>&gt;&gt; <span class="comment">//输入  </span></span><br><span class="line">cout&lt;&lt;//输出： 数字，字符串，数组第一个元素，不能直接输出结构体，要根据属性输出</span><br><span class="line"><span class="built_in">cerr</span> <span class="comment">//报错</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"> infile.get()<span class="comment">//在输入流中获取一个字符，返回一个int类型的数值，如果输入流中没有则返回EOF</span></span><br><span class="line"> infile.unget()<span class="comment">//将读入的最后一个字符退回到输入流上</span></span><br><span class="line"> getline(infile,str)</span><br><span class="line"> <span class="comment">//是全局方法，不用点号(.)来调用，作用是将输入流中的下一行复制到str字符串中</span></span><br><span class="line"> inflie&gt;&gt;var </span><br><span class="line"> <span class="comment">// 从输入流中读取一个值放入变量var中</span></span><br><span class="line"> outfile.put(ch)</span><br><span class="line"> <span class="comment">//将ch这个字符放入到输出流outfile中</span></span><br><span class="line"> outfile &lt;&lt; expr</span><br><span class="line"> <span class="comment">//将expr写入到输出流中</span></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">```c++</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="built_in">isupper</span>(ch) </span><br><span class="line"><span class="comment">//大写字母返回ture</span></span><br><span class="line"><span class="built_in">islower</span>(ch)</span><br><span class="line"><span class="comment">//小写字母返回true</span></span><br><span class="line"><span class="built_in">isalpha</span>(ch)</span><br><span class="line"><span class="comment">//英文字母返回true</span></span><br><span class="line"><span class="built_in">isdigit</span>(ch)</span><br><span class="line"><span class="comment">//阿拉伯数字返回true</span></span><br><span class="line"><span class="built_in">ispunct</span>(ch)</span><br><span class="line"><span class="comment">//标点符号返回true</span></span><br><span class="line"><span class="built_in">isspace</span>(ch)</span><br><span class="line"><span class="comment">//字符能在屏幕里展现空白符，比如“空格，\t,\n,\f,\v”返回true</span></span><br><span class="line"><span class="built_in">isprint</span>(ch)</span><br><span class="line"><span class="comment">//字符为可打印字符（包括空格）返回true</span></span><br><span class="line"><span class="built_in">toupper</span>(ch);<span class="built_in">tolower</span>(ch);</span><br><span class="line"><span class="comment">//将ch转换成大，小写字母</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="built_in">fabs</span>(x) </span><br><span class="line"><span class="comment">//返回绝对值</span></span><br><span class="line"><span class="built_in">floor</span>(x)</span><br><span class="line"><span class="comment">// 向下取整</span></span><br><span class="line"><span class="built_in">ceil</span>(x)</span><br><span class="line"><span class="comment">//向上取整</span></span><br><span class="line"><span class="built_in">fmod</span>(x,y)</span><br><span class="line"><span class="comment">//返回x/y的浮点余数</span></span><br><span class="line"><span class="built_in">sqrt</span>(x)</span><br><span class="line"><span class="comment">//返回x的开方</span></span><br><span class="line"><span class="built_in">pow</span>(x,y)</span><br><span class="line"><span class="comment">//返回x的y次方</span></span><br><span class="line"><span class="built_in">exp</span>(x)</span><br><span class="line"><span class="comment">//返回e的x次方</span></span><br><span class="line"><span class="built_in">log</span>(x)</span><br><span class="line"><span class="comment">//返回x的自然对数</span></span><br><span class="line"><span class="built_in">sin</span>(theta)</span><br><span class="line"><span class="built_in">cos</span>(theta)</span><br><span class="line"><span class="built_in">atan</span>(x)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>第四章 抽象数据类型</p>
</li>
<li><p>Vector class 向量类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"vector.h"</span></span></span><br><span class="line">    Vector&lt;<span class="keyword">int</span>&gt; vec;<span class="comment">//声明一组数字类型的向量</span></span><br><span class="line">   vec.size()<span class="comment">//返回vec向量的元素数量</span></span><br><span class="line">   vec.isEmpty()<span class="comment">//如果为空返回true</span></span><br><span class="line">   vec.getAt(index)==vec[index]</span><br><span class="line">   <span class="comment">//返回vec中下标为index的值</span></span><br><span class="line">   vec.setAt(index,value)</span><br><span class="line">   <span class="comment">//将vec中index位置的值设置为value,如果index超出下标界限则报错</span></span><br><span class="line">   vec.add(value) </span><br><span class="line">   <span class="comment">//在vec尾部添加一个值</span></span><br><span class="line">   vec.insertAt(index,value)</span><br><span class="line"><span class="comment">//在vec中index位置的值之前插入一个值value</span></span><br><span class="line">vec.removeAt(index)</span><br><span class="line"><span class="comment">//删除index位置上的值</span></span><br><span class="line">vec.clear()</span><br><span class="line"><span class="comment">//清空vec</span></span><br><span class="line">vec.iterator()</span><br><span class="line"><span class="comment">//返回所有元素的迭代总和</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Grid class 格子类</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Grid&lt;<span class="keyword">double</span>&gt; matrix(<span class="number">3</span>,<span class="number">2</span>);</span><br><span class="line">matrix.numRows()</span><br><span class="line">matrix.numCols()</span><br><span class="line"><span class="comment">//返回matrix的行数和列数</span></span><br><span class="line">matrix.getAt(row,col)</span><br><span class="line">matrix.setAt(row,col,value)</span><br><span class="line">matrix.resize(rows,cols)</span><br><span class="line"><span class="comment">//重新定义matrix的大小，之前的内容都被丢弃</span></span><br><span class="line">matrix.iterator()<span class="comment">//返回一个遍历元素的迭代器</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>stack 堆类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Stack&lt;<span class="keyword">int</span>&gt; sta;</span><br><span class="line">sta.size();</span><br><span class="line">sta.isEmpty();</span><br><span class="line">sta.push(value);<span class="comment">//在堆顶添加一个元素</span></span><br><span class="line">sta.pop()<span class="comment">//从堆顶弹出一个元素</span></span><br><span class="line">sta.peek()<span class="comment">//返回堆顶的值但是不弹出</span></span><br><span class="line">sta.clear()</span><br></pre></td></tr></table></figure>
</li>
<li><p>Queue class 队列类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"queue.h"</span></span></span><br><span class="line"> Queue&lt;<span class="keyword">int</span>&gt; que;</span><br><span class="line"> que.size()</span><br><span class="line"> que.isEmpty()</span><br><span class="line"> que.enqueue(value) <span class="comment">//向队尾推入一个值</span></span><br><span class="line"> que.dequeue()<span class="comment">//将队首的值拿出并返回</span></span><br><span class="line"> que.peek()<span class="comment">//返回队首值但不拿出</span></span><br><span class="line"> que.clear()</span><br></pre></td></tr></table></figure>
</li>
<li><p>Map class map类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;<span class="built_in">string</span>&gt; dictionary;</span><br><span class="line">dictionary.size();</span><br><span class="line">dictionary.isEmpty();</span><br><span class="line">dictionary.put(key,value)==dictionary[key]=value<span class="comment">//在dictionary中添加或者重置键为key的值</span></span><br><span class="line">dictionary.remove(key)</span><br><span class="line">dictionary.containKey(key)<span class="comment">//存在这个键返回true</span></span><br><span class="line">dictionary.clear();</span><br><span class="line">dictionary.iterator();</span><br></pre></td></tr></table></figure>
</li>
<li><p>Lexicon class 词汇类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Lexicon.h"</span></span></span><br><span class="line"><span class="function">Lexicon <span class="title">english</span><span class="params">(<span class="string">"EnglishWords.dat"</span>)</span></span>;</span><br><span class="line">english.size()<span class="comment">//返回english这个词汇里有多少个词</span></span><br><span class="line">english.isEmpty();</span><br><span class="line">english.add(word);<span class="comment">//给english词汇表添加一个词，如果已经存在则操作无效</span></span><br><span class="line">english.addWordsFromFile(name)<span class="comment">//将文件名字为name中的所有词添加到english中，其中文件必须是每一个词一行</span></span><br><span class="line"><span class="keyword">if</span>(english.containsWords(word))...<span class="comment">//判断word是否在english这个词汇表里面，返回bool</span></span><br><span class="line"><span class="keyword">if</span>(english.containsPrefix(prefix))<span class="comment">//判断词汇表里面是否有哪个词以prefix开头，返回bool</span></span><br><span class="line">english.clear();</span><br><span class="line">english.iterator();</span><br></pre></td></tr></table></figure>
</li>
<li><p>Scanner class 扫描类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">    Scanner scanner;</span><br><span class="line">    scanner.setInput(str)</span><br><span class="line"> <span class="comment">//输入被扫描字符串</span></span><br><span class="line">    scanner.setInpt(stream)</span><br><span class="line"> <span class="comment">//输入被扫描输入流</span></span><br><span class="line">    scanner.hasMoreTokens()</span><br><span class="line"><span class="comment">//如果还有额外的tokens返回true</span></span><br><span class="line">    scanner.nextToken()</span><br><span class="line"><span class="comment">// 返回下一个token</span></span><br><span class="line">    scanner.saveToken(token)</span><br><span class="line"><span class="comment">//将token存储在目前扫描string的状态位置上</span></span><br><span class="line">    setSpaceOption(option)</span><br><span class="line">    getSpaceOpition()</span><br><span class="line"><span class="comment">//option可以为：Scanner::PreserveSpaces Scanner::IgnoreSpaces 设置是将多个空白符返回成一个空白符还是直接忽视所有空白符</span></span><br><span class="line"></span><br><span class="line">setNumberOption(option)</span><br><span class="line">getNumberOption()</span><br><span class="line"><span class="comment">//option可选：</span></span><br><span class="line"><span class="comment">//Scanner::ScanNumbersAsLetters</span></span><br><span class="line"><span class="comment">//Scanner::ScanNumbersAsIntegers</span></span><br><span class="line"><span class="comment">//Scanner::ScanNumbersAsReals</span></span><br><span class="line"><span class="comment">//将设置扫描到的数字字符串视为什么，默认为文字</span></span><br><span class="line"></span><br><span class="line">setStringOption(option)</span><br><span class="line">getStringOption()</span><br><span class="line"><span class="comment">//option：Scanner::ScanQuotesAsPunctuation Scanner::ScanQutesAsStrings设置是否将引号作为单个token，默认引号为标点符号</span></span><br><span class="line"></span><br><span class="line">setBrancketOption(option)</span><br><span class="line">getBracketOption()</span><br><span class="line"><span class="comment">//option：Scanner::ScanBracketsAsPunctuation Scanner::ScanBracketsAsTag 设置是否将HTML的标签设置为单个token，默认为符号</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>iterator的使用方法</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Lexicon::Iterator iter = english.iterator();</span><br><span class="line"><span class="keyword">while</span>(iter.hasNext())&#123;</span><br><span class="line">    <span class="built_in">string</span> word = iter.next();</span><br><span class="line">    <span class="keyword">if</span>(word.length()==<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; word &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>foreach</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foreach(<span class="built_in">string</span> words in english)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/06/environment-thinking/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gyf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="fengzi2016 blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/06/environment-thinking/" itemprop="url">关于环境配置的小总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-06T00:00:00+08:00">
                2018-05-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/05/06/environment-thinking/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/05/06/environment-thinking/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="关于环境配置的小总结"><a href="#关于环境配置的小总结" class="headerlink" title="关于环境配置的小总结"></a>关于环境配置的小总结</h2><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我们知道做稍微复杂一点的开发都需要先做好环境配置的准备。很多已经封装好的比如用于运行javascript的node.js环境或者运行java的jdk环境，在不同的系统上有不同的配置要求。在实际操作中，第一次配置环境可能只需要按照安装手册，一直点“下一步”，系统就帮你把各种环境写好，但是如果遇到升级或者突发情况，在windows系统环境下，某些运行环境的更改就变得尤其复杂，这个时候就会浪费很多时间去清理旧环境，更可能卡到某个点无法进行。所以说，这次分享，我想详细探索系统环境变量。</p>
<h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><blockquote>
<p>环境变量（environment variables）一般是指在操作系统中用来指定操作系统运行环境的一些参数，如：临时文件夹位置和系统文件夹位置等。</p>
</blockquote>
<p>环境变量包含了一个或多个应用程序所将用到的信息。</p>
<p>环境变量分为：用户变量和系统变量。用户变量，顾名思义，一个系统可以有多个用户，每个用户有各自的环境变量。而系统变量则是全局变量，没有用户之分均存在本系统中。而如果某个环境变量存在于用户变量和系统变量中，则变量的值是用户变量与系统变量的值的叠加（并集），在使用时，则以“就近原则”，一般先找“运行环境变量”，找不到再找“用户变量”，还没找到就找“系统变量”，最后还没有找到则报错。</p>
<p>环境变量可以用作：设置环境参数；在同一台电脑上不同系统中实现软件共用；系统运行。</p>
<p>环境变量中比较重要的，也是我们在配置环境比较常见的有PATH变量。</p>
<h3 id="PATH变量"><a href="#PATH变量" class="headerlink" title="PATH变量"></a>PATH变量</h3><p>当我们运行“cmd”命令行时碰到 <strong>“xxx 不是内部或外部命令，也不是可运行的程序或批处理文件”</strong>。这个就是PATH变量没有配置好导致的结果。</p>
<p>设置环境变量打开方式：我的电脑-&gt;属性-&gt;高级-&gt;环境变量</p>
<p>PATH变量，PATH是路径的意思，如果你随便在某个目录下比如“桌面”打开命令行运行某个命令，系统会现在你所在目录“桌面”下找<strong>和运行命令名字相同的</strong>.exe文件或者批处理文件，如果找不到就会去找你设置的用户变量和系统变量。</p>
<p>比如：</p>
<p>在已经设置好nvm的所需要的环境变量下，</p>
<p>   <img src="https://wx3.sinaimg.cn/mw1024/006P0MECly1fm3mlhve8bj30m20ll3z9.jpg" alt="变量"></p>
<p>我在桌面打开命令行运行nvm -v，保证桌面没有相应的运行程序文件。</p>
<p>   <img src="https://wx4.sinaimg.cn/mw1024/006P0MECly1fm3mlhtgkij308f041gli.jpg" alt="运行"></p>
<p>系统就按远近顺序寻找运行文件所在目录，直到找到我设置的NVM_HOME所在目录，再运行第七个nvm应用程序。</p>
<p><img src="https://wx4.sinaimg.cn/mw1024/006P0MECly1fm3mlhv8ybj30w00d30tt.jpg" alt="程序"></p>
<p>这就是环境变量PATH的作用，如果我们不去设置，但也想在不同目录下运行此程序，也可以用绝对路径。但是每次都这样使用绝对路径比较麻烦，环境变量PATH就简化了我们的步骤。</p>
<p>这个时候应该已经理解了为什么会报错不是命令，而内部，外部命令，可运行的程序，批处理文件又是怎么分出的呢？</p>
<blockquote>
<p> 内部命令和外部命令是DOS（disk operating system，微软早期基于命令行的操作系统）时代的概念，百度百科的解释是：内部命令是随每次启动的COMMAND_COM装入并常驻内存，而外部命令是一条单独的可执行文件。粗略地讲，所谓内部命令就是最核心、使用最多的命令。为了提高响应速度，系统一启动，这些命令就被加载到内存，因此可以迅速、直接地执行；而外部命令由于使用相对较少，就不预先加载到内存，当用户使用时，再到硬盘上（c:\windows\system32）找相应的可执行文件，然后加载到内存执行。像dir、cd等都是内部命令，而诸如attrib、format等都是外部命令。尽管DOS的时代早已成为了历史，但某些操作却必须在命令行模式下完成，对专业人士来说更是如此。因此，Windows产品一直保留着命令行模式这个工具。</p>
</blockquote>
<p><strong>也就是说，内部命令就是初期比较常用的命令的集合，最后被系统公司改变成不需要设置的基本命令，被直接放在内存中。</strong></p>
<p><strong>批处理文件则是一个文件包含很多命令，当文件执行时，按顺序一条一条执行。</strong></p>
<h2 id="windows-系统下其它常见环境变量"><a href="#windows-系统下其它常见环境变量" class="headerlink" title="windows 系统下其它常见环境变量"></a>windows 系统下其它常见环境变量</h2><p>局部</p>
<p>%ALLUSERSPROFILE% 局部 返回所有“用户配置文件”的位置。</p>
<p>%APPDATA% 局部 返回默认情况下应用程序存储数据的位置。</p>
<p>%CD% 局部 返回当前目录字符串。</p>
<p>%CMDCMDLINE% 局部 返回用来启动当前的 Cmd.exe 的准确命令行。</p>
<p>%UserProfile% 局部 返回当前用户的配置文件的位置.</p>
<p>系统</p>
<p>%CMDEXTVERSION% 系统 返回当前的“命令处理程序扩展”的版本号。</p>
<p>%COMPUTERNAME% 系统 返回计算机的名称。</p>
<p>%WINDIR% 系统 返回操作系统目录的位置。</p>
<p>%HOMEPATH% 系统 返回用户主目录的完整路径。基于主目录值的设置。用户主目录是在“本地用户和组”中指定的。</p>
<p>%HOMESHARE% 系统 返回用户的共享主目录的网络路径。基于主目录值的设置。用户主目录是在“本地用户和组”中指定的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://avatars1.githubusercontent.com/u/22490787?v=4&s=460"
                alt="gyf" />
            
              <p class="site-author-name" itemprop="name">gyf</p>
              <p class="site-description motion-element" itemprop="description">frontend blog 前端技术博客</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/fengzi2016" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://user.qzone.qq.com/1820166258/infocenter" target="_blank" title="QQ">
                    
                      <i class="fa fa-fw fa-qq"></i>QQ</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/fengzi2016China" target="_blank" title="Twitter">
                    
                      <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                </span>
              
            
          </div>

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                团队分享
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://share.muxixyz.com/" title="MuXi" target="_blank">MuXi</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">gyf</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  









  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/three/three.min.js"></script>

  
  <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  

    
      <script id="dsq-count-scr" src="https://.disqus.com/count.js" async></script>
    

    

  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
